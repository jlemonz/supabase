[{"data":1,"prerenderedAt":738},["ShallowReactive",2],{"navigation":3,"/usage/services/serversupabaseclient":61,"/usage/services/serversupabaseclient-surround":733},[4,8,12,49,53,57],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","i-heroicons-rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","i-heroicons-lock-closed",{"title":13,"_path":14,"children":15,"icon":48},"Usage","/usage",[16,32],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23,26,29],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseCookieRedirect","/usage/composables/usesupabasecookieredirect",{"title":27,"_path":28},"useSupabaseSession","/usage/composables/usesupabasesession",{"title":30,"_path":31},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":33,"_path":34,"children":35},"Server services","/usage/services",[36,39,42,45],{"title":37,"_path":38},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":40,"_path":41},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":43,"_path":44},"serverSupabaseSession","/usage/services/serversupabasesession",{"title":46,"_path":47},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":50,"_path":51,"icon":52},"Demo","/demo","i-heroicons-computer-desktop-20-solid",{"title":54,"_path":55,"icon":56},"Changelog","/changelog","i-heroicons-bookmark",{"title":58,"_path":59,"icon":60},"Roadmap","/roadmap","i-heroicons-map",{"_path":38,"_dir":62,"_draft":63,"_partial":63,"_locale":64,"title":37,"description":65,"body":66,"_type":727,"_id":728,"_source":729,"_file":730,"_stem":731,"_extension":732},"services",false,"","Make requests to the Supabase API on server side with the serverSupabaseClient service",{"type":67,"children":68,"toc":725},"root",[69,94,114,142,466,471,576,590,719],{"type":70,"tag":71,"props":72,"children":75},"element","callout",{"color":73,"icon":74},"amber","i-heroicons-exclamation-triangle-20-solid",[76],{"type":70,"tag":77,"props":78,"children":79},"p",{},[80,83,92],{"type":81,"value":82},"text","This section assumes you're familiar with ",{"type":70,"tag":84,"props":85,"children":89},"a",{"href":86,"rel":87},"https://v3.nuxtjs.org/guide/concepts/server-engine",[88],"nofollow",[90],{"type":81,"value":91},"Nitro",{"type":81,"value":93},", the server engine powered by Nuxt.",{"type":70,"tag":77,"props":95,"children":96},{},[97,99,103,105,112],{"type":81,"value":98},"This function is working similary as the ",{"type":70,"tag":84,"props":100,"children":101},{"href":22},[102],{"type":81,"value":21},{"type":81,"value":104}," composable but is designed to be used in ",{"type":70,"tag":84,"props":106,"children":109},{"href":107,"rel":108},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[88],[110],{"type":81,"value":111},"server routes",{"type":81,"value":113},".",{"type":70,"tag":77,"props":115,"children":116},{},[117,119,125,127,133,135,140],{"type":81,"value":118},"Define your server route and just import the ",{"type":70,"tag":120,"props":121,"children":123},"code",{"className":122},[],[124],{"type":81,"value":37},{"type":81,"value":126}," from ",{"type":70,"tag":120,"props":128,"children":130},{"className":129},[],[131],{"type":81,"value":132},"#supabase/server",{"type":81,"value":134},". Be careful,  ",{"type":70,"tag":120,"props":136,"children":138},{"className":137},[],[139],{"type":81,"value":37},{"type":81,"value":141}," is returning a promise.",{"type":70,"tag":143,"props":144,"children":149},"pre",{"className":145,"code":146,"filename":147,"language":148,"meta":64,"style":64},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseClient } from '#supabase/server'\n\nexport default eventHandler(async (event) => {\n  const client = await serverSupabaseClient(event)\n\n  const { data } = await client.from('libraries').select('*')\n\n  return { libraries: data }\n})\n","server/api/libraries.ts","ts",[150],{"type":70,"tag":120,"props":151,"children":152},{"__ignoreMap":64},[153,202,212,269,311,319,413,421,453],{"type":70,"tag":154,"props":155,"children":158},"span",{"class":156,"line":157},"line",1,[159,165,171,177,182,187,192,197],{"type":70,"tag":154,"props":160,"children":162},{"style":161},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[163],{"type":81,"value":164},"import",{"type":70,"tag":154,"props":166,"children":168},{"style":167},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[169],{"type":81,"value":170}," {",{"type":70,"tag":154,"props":172,"children":174},{"style":173},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[175],{"type":81,"value":176}," serverSupabaseClient",{"type":70,"tag":154,"props":178,"children":179},{"style":167},[180],{"type":81,"value":181}," }",{"type":70,"tag":154,"props":183,"children":184},{"style":161},[185],{"type":81,"value":186}," from",{"type":70,"tag":154,"props":188,"children":189},{"style":167},[190],{"type":81,"value":191}," '",{"type":70,"tag":154,"props":193,"children":195},{"style":194},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[196],{"type":81,"value":132},{"type":70,"tag":154,"props":198,"children":199},{"style":167},[200],{"type":81,"value":201},"'\n",{"type":70,"tag":154,"props":203,"children":205},{"class":156,"line":204},2,[206],{"type":70,"tag":154,"props":207,"children":209},{"emptyLinePlaceholder":208},true,[210],{"type":81,"value":211},"\n",{"type":70,"tag":154,"props":213,"children":215},{"class":156,"line":214},3,[216,221,226,232,237,243,248,254,259,264],{"type":70,"tag":154,"props":217,"children":218},{"style":161},[219],{"type":81,"value":220},"export",{"type":70,"tag":154,"props":222,"children":223},{"style":161},[224],{"type":81,"value":225}," default",{"type":70,"tag":154,"props":227,"children":229},{"style":228},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[230],{"type":81,"value":231}," eventHandler",{"type":70,"tag":154,"props":233,"children":234},{"style":173},[235],{"type":81,"value":236},"(",{"type":70,"tag":154,"props":238,"children":240},{"style":239},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[241],{"type":81,"value":242},"async",{"type":70,"tag":154,"props":244,"children":245},{"style":167},[246],{"type":81,"value":247}," (",{"type":70,"tag":154,"props":249,"children":251},{"style":250},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[252],{"type":81,"value":253},"event",{"type":70,"tag":154,"props":255,"children":256},{"style":167},[257],{"type":81,"value":258},")",{"type":70,"tag":154,"props":260,"children":261},{"style":239},[262],{"type":81,"value":263}," =>",{"type":70,"tag":154,"props":265,"children":266},{"style":167},[267],{"type":81,"value":268}," {\n",{"type":70,"tag":154,"props":270,"children":272},{"class":156,"line":271},4,[273,278,283,288,293,297,302,306],{"type":70,"tag":154,"props":274,"children":275},{"style":239},[276],{"type":81,"value":277},"  const",{"type":70,"tag":154,"props":279,"children":280},{"style":173},[281],{"type":81,"value":282}," client",{"type":70,"tag":154,"props":284,"children":285},{"style":167},[286],{"type":81,"value":287}," =",{"type":70,"tag":154,"props":289,"children":290},{"style":161},[291],{"type":81,"value":292}," await",{"type":70,"tag":154,"props":294,"children":295},{"style":228},[296],{"type":81,"value":176},{"type":70,"tag":154,"props":298,"children":300},{"style":299},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[301],{"type":81,"value":236},{"type":70,"tag":154,"props":303,"children":304},{"style":173},[305],{"type":81,"value":253},{"type":70,"tag":154,"props":307,"children":308},{"style":299},[309],{"type":81,"value":310},")\n",{"type":70,"tag":154,"props":312,"children":314},{"class":156,"line":313},5,[315],{"type":70,"tag":154,"props":316,"children":317},{"emptyLinePlaceholder":208},[318],{"type":81,"value":211},{"type":70,"tag":154,"props":320,"children":322},{"class":156,"line":321},6,[323,327,331,336,340,344,348,352,356,361,365,370,375,379,383,387,392,396,400,405,409],{"type":70,"tag":154,"props":324,"children":325},{"style":239},[326],{"type":81,"value":277},{"type":70,"tag":154,"props":328,"children":329},{"style":167},[330],{"type":81,"value":170},{"type":70,"tag":154,"props":332,"children":333},{"style":173},[334],{"type":81,"value":335}," data",{"type":70,"tag":154,"props":337,"children":338},{"style":167},[339],{"type":81,"value":181},{"type":70,"tag":154,"props":341,"children":342},{"style":167},[343],{"type":81,"value":287},{"type":70,"tag":154,"props":345,"children":346},{"style":161},[347],{"type":81,"value":292},{"type":70,"tag":154,"props":349,"children":350},{"style":173},[351],{"type":81,"value":282},{"type":70,"tag":154,"props":353,"children":354},{"style":167},[355],{"type":81,"value":113},{"type":70,"tag":154,"props":357,"children":358},{"style":228},[359],{"type":81,"value":360},"from",{"type":70,"tag":154,"props":362,"children":363},{"style":299},[364],{"type":81,"value":236},{"type":70,"tag":154,"props":366,"children":367},{"style":167},[368],{"type":81,"value":369},"'",{"type":70,"tag":154,"props":371,"children":372},{"style":194},[373],{"type":81,"value":374},"libraries",{"type":70,"tag":154,"props":376,"children":377},{"style":167},[378],{"type":81,"value":369},{"type":70,"tag":154,"props":380,"children":381},{"style":299},[382],{"type":81,"value":258},{"type":70,"tag":154,"props":384,"children":385},{"style":167},[386],{"type":81,"value":113},{"type":70,"tag":154,"props":388,"children":389},{"style":228},[390],{"type":81,"value":391},"select",{"type":70,"tag":154,"props":393,"children":394},{"style":299},[395],{"type":81,"value":236},{"type":70,"tag":154,"props":397,"children":398},{"style":167},[399],{"type":81,"value":369},{"type":70,"tag":154,"props":401,"children":402},{"style":194},[403],{"type":81,"value":404},"*",{"type":70,"tag":154,"props":406,"children":407},{"style":167},[408],{"type":81,"value":369},{"type":70,"tag":154,"props":410,"children":411},{"style":299},[412],{"type":81,"value":310},{"type":70,"tag":154,"props":414,"children":416},{"class":156,"line":415},7,[417],{"type":70,"tag":154,"props":418,"children":419},{"emptyLinePlaceholder":208},[420],{"type":81,"value":211},{"type":70,"tag":154,"props":422,"children":424},{"class":156,"line":423},8,[425,430,434,439,444,448],{"type":70,"tag":154,"props":426,"children":427},{"style":161},[428],{"type":81,"value":429},"  return",{"type":70,"tag":154,"props":431,"children":432},{"style":167},[433],{"type":81,"value":170},{"type":70,"tag":154,"props":435,"children":436},{"style":299},[437],{"type":81,"value":438}," libraries",{"type":70,"tag":154,"props":440,"children":441},{"style":167},[442],{"type":81,"value":443},":",{"type":70,"tag":154,"props":445,"children":446},{"style":173},[447],{"type":81,"value":335},{"type":70,"tag":154,"props":449,"children":450},{"style":167},[451],{"type":81,"value":452}," }\n",{"type":70,"tag":154,"props":454,"children":456},{"class":156,"line":455},9,[457,462],{"type":70,"tag":154,"props":458,"children":459},{"style":167},[460],{"type":81,"value":461},"}",{"type":70,"tag":154,"props":463,"children":464},{"style":173},[465],{"type":81,"value":310},{"type":70,"tag":77,"props":467,"children":468},{},[469],{"type":81,"value":470},"Then call your API route from any vue file:",{"type":70,"tag":143,"props":472,"children":475},{"className":145,"code":473,"filename":474,"language":148,"meta":64,"style":64},"const fetchLibrary = async () => {\n  const { libraries } = await $fetch('/api/libraries')\n}\n","pages/index.vue",[476],{"type":70,"tag":120,"props":477,"children":478},{"__ignoreMap":64},[479,515,568],{"type":70,"tag":154,"props":480,"children":481},{"class":156,"line":157},[482,487,492,497,502,507,511],{"type":70,"tag":154,"props":483,"children":484},{"style":239},[485],{"type":81,"value":486},"const",{"type":70,"tag":154,"props":488,"children":489},{"style":173},[490],{"type":81,"value":491}," fetchLibrary ",{"type":70,"tag":154,"props":493,"children":494},{"style":167},[495],{"type":81,"value":496},"=",{"type":70,"tag":154,"props":498,"children":499},{"style":239},[500],{"type":81,"value":501}," async",{"type":70,"tag":154,"props":503,"children":504},{"style":167},[505],{"type":81,"value":506}," ()",{"type":70,"tag":154,"props":508,"children":509},{"style":239},[510],{"type":81,"value":263},{"type":70,"tag":154,"props":512,"children":513},{"style":167},[514],{"type":81,"value":268},{"type":70,"tag":154,"props":516,"children":517},{"class":156,"line":204},[518,522,526,530,534,538,542,547,551,555,560,564],{"type":70,"tag":154,"props":519,"children":520},{"style":239},[521],{"type":81,"value":277},{"type":70,"tag":154,"props":523,"children":524},{"style":167},[525],{"type":81,"value":170},{"type":70,"tag":154,"props":527,"children":528},{"style":173},[529],{"type":81,"value":438},{"type":70,"tag":154,"props":531,"children":532},{"style":167},[533],{"type":81,"value":181},{"type":70,"tag":154,"props":535,"children":536},{"style":167},[537],{"type":81,"value":287},{"type":70,"tag":154,"props":539,"children":540},{"style":161},[541],{"type":81,"value":292},{"type":70,"tag":154,"props":543,"children":544},{"style":228},[545],{"type":81,"value":546}," $fetch",{"type":70,"tag":154,"props":548,"children":549},{"style":299},[550],{"type":81,"value":236},{"type":70,"tag":154,"props":552,"children":553},{"style":167},[554],{"type":81,"value":369},{"type":70,"tag":154,"props":556,"children":557},{"style":194},[558],{"type":81,"value":559},"/api/libraries",{"type":70,"tag":154,"props":561,"children":562},{"style":167},[563],{"type":81,"value":369},{"type":70,"tag":154,"props":565,"children":566},{"style":299},[567],{"type":81,"value":310},{"type":70,"tag":154,"props":569,"children":570},{"class":156,"line":214},[571],{"type":70,"tag":154,"props":572,"children":573},{"style":167},[574],{"type":81,"value":575},"}\n",{"type":70,"tag":77,"props":577,"children":578},{},[579,581,588],{"type":81,"value":580},"Be careful, if you want to call this route on SSR, please read this ",{"type":70,"tag":84,"props":582,"children":585},{"href":583,"rel":584},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[88],[586],{"type":81,"value":587},"section",{"type":81,"value":589},", you must send your browser cookies including your supabase token.",{"type":70,"tag":143,"props":591,"children":593},{"className":145,"code":592,"filename":474,"language":148,"meta":64,"style":64},"const { data: { libraries }} = await useFetch('/api/libraries', {\n  headers: useRequestHeaders(['cookie'])\n})\n",[594],{"type":70,"tag":120,"props":595,"children":596},{"__ignoreMap":64},[597,668,708],{"type":70,"tag":154,"props":598,"children":599},{"class":156,"line":157},[600,604,608,612,616,620,625,630,634,638,643,647,651,655,659,664],{"type":70,"tag":154,"props":601,"children":602},{"style":239},[603],{"type":81,"value":486},{"type":70,"tag":154,"props":605,"children":606},{"style":167},[607],{"type":81,"value":170},{"type":70,"tag":154,"props":609,"children":610},{"style":299},[611],{"type":81,"value":335},{"type":70,"tag":154,"props":613,"children":614},{"style":167},[615],{"type":81,"value":443},{"type":70,"tag":154,"props":617,"children":618},{"style":167},[619],{"type":81,"value":170},{"type":70,"tag":154,"props":621,"children":622},{"style":173},[623],{"type":81,"value":624}," libraries ",{"type":70,"tag":154,"props":626,"children":627},{"style":167},[628],{"type":81,"value":629},"}}",{"type":70,"tag":154,"props":631,"children":632},{"style":167},[633],{"type":81,"value":287},{"type":70,"tag":154,"props":635,"children":636},{"style":161},[637],{"type":81,"value":292},{"type":70,"tag":154,"props":639,"children":640},{"style":228},[641],{"type":81,"value":642}," useFetch",{"type":70,"tag":154,"props":644,"children":645},{"style":173},[646],{"type":81,"value":236},{"type":70,"tag":154,"props":648,"children":649},{"style":167},[650],{"type":81,"value":369},{"type":70,"tag":154,"props":652,"children":653},{"style":194},[654],{"type":81,"value":559},{"type":70,"tag":154,"props":656,"children":657},{"style":167},[658],{"type":81,"value":369},{"type":70,"tag":154,"props":660,"children":661},{"style":167},[662],{"type":81,"value":663},",",{"type":70,"tag":154,"props":665,"children":666},{"style":167},[667],{"type":81,"value":268},{"type":70,"tag":154,"props":669,"children":670},{"class":156,"line":204},[671,676,680,685,690,694,699,703],{"type":70,"tag":154,"props":672,"children":673},{"style":299},[674],{"type":81,"value":675},"  headers",{"type":70,"tag":154,"props":677,"children":678},{"style":167},[679],{"type":81,"value":443},{"type":70,"tag":154,"props":681,"children":682},{"style":228},[683],{"type":81,"value":684}," useRequestHeaders",{"type":70,"tag":154,"props":686,"children":687},{"style":173},[688],{"type":81,"value":689},"([",{"type":70,"tag":154,"props":691,"children":692},{"style":167},[693],{"type":81,"value":369},{"type":70,"tag":154,"props":695,"children":696},{"style":194},[697],{"type":81,"value":698},"cookie",{"type":70,"tag":154,"props":700,"children":701},{"style":167},[702],{"type":81,"value":369},{"type":70,"tag":154,"props":704,"children":705},{"style":173},[706],{"type":81,"value":707},"])\n",{"type":70,"tag":154,"props":709,"children":710},{"class":156,"line":214},[711,715],{"type":70,"tag":154,"props":712,"children":713},{"style":167},[714],{"type":81,"value":461},{"type":70,"tag":154,"props":716,"children":717},{"style":173},[718],{"type":81,"value":310},{"type":70,"tag":720,"props":721,"children":722},"style",{},[723],{"type":81,"value":724},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":64,"searchDepth":204,"depth":204,"links":726},[],"markdown","content:4.usage:services:1.serverSupabaseClient.md","content","4.usage/services/1.serverSupabaseClient.md","4.usage/services/1.serverSupabaseClient","md",[734,736],{"_path":31,"title":30,"description":735},"Auto import and use your Supabase user with the useSupabaseUser composable",{"_path":41,"title":40,"description":737},"Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",1740754681017]