[{"data":1,"prerenderedAt":612},["ShallowReactive",2],{"navigation":3,"/usage/services/serversupabaseservicerole":58,"/usage/services/serversupabaseservicerole-surround":607},[4,8,12,46,50,54],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","i-heroicons-rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","i-heroicons-lock-closed",{"title":13,"_path":14,"children":15,"icon":45},"Usage","/usage",[16,29],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23,26],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseSession","/usage/composables/usesupabasesession",{"title":27,"_path":28},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":30,"_path":31,"children":32},"Server services","/usage/services",[33,36,39,42],{"title":34,"_path":35},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":37,"_path":38},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":40,"_path":41},"serverSupabaseSession","/usage/services/serversupabasesession",{"title":43,"_path":44},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":47,"_path":48,"icon":49},"Demo","/demo","i-heroicons-computer-desktop-20-solid",{"title":51,"_path":52,"icon":53},"Changelog","/changelog","i-heroicons-bookmark",{"title":55,"_path":56,"icon":57},"Roadmap","/roadmap","i-heroicons-map",{"_path":38,"_dir":59,"_draft":60,"_partial":60,"_locale":61,"title":37,"description":62,"navigation":63,"body":64,"_type":601,"_id":602,"_source":603,"_file":604,"_stem":605,"_extension":606},"services",false,"","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",{"title":37},{"type":65,"children":66,"toc":599},"root",[67,92,106,126,160,179,483,488,593],{"type":68,"tag":69,"props":70,"children":73},"element","callout",{"color":71,"icon":72},"amber","i-heroicons-exclamation-triangle-20-solid",[74],{"type":68,"tag":75,"props":76,"children":77},"p",{},[78,81,90],{"type":79,"value":80},"text","This section assumes you're familiar with ",{"type":68,"tag":82,"props":83,"children":87},"a",{"href":84,"rel":85},"https://v3.nuxtjs.org/guide/concepts/server-engine",[86],"nofollow",[88],{"type":79,"value":89},"Nitro",{"type":79,"value":91},", the server engine powered by Nuxt.",{"type":68,"tag":75,"props":93,"children":94},{},[95,97,104],{"type":79,"value":96},"This function is designed to work only in ",{"type":68,"tag":82,"props":98,"children":101},{"href":99,"rel":100},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[86],[102],{"type":79,"value":103},"server routes",{"type":79,"value":105},", there is no vue composable equivalent.",{"type":68,"tag":75,"props":107,"children":108},{},[109,111,115,117,124],{"type":79,"value":110},"It works similary as the ",{"type":68,"tag":82,"props":112,"children":113},{"href":35},[114],{"type":79,"value":34},{"type":79,"value":116}," but it provides a client with super admin rights that can bypass your ",{"type":68,"tag":82,"props":118,"children":121},{"href":119,"rel":120},"https://supabase.com/docs/guides/auth/row-level-security",[86],[122],{"type":79,"value":123},"Row Level Security",{"type":79,"value":125},".",{"type":68,"tag":127,"props":128,"children":129},"blockquote",{},[130],{"type":68,"tag":75,"props":131,"children":132},{},[133,135,142,144,150,152,159],{"type":79,"value":134},"The client is initialized with the ",{"type":68,"tag":136,"props":137,"children":139},"code",{"className":138},[],[140],{"type":79,"value":141},"SUPABASE_SERVICE_KEY",{"type":79,"value":143}," you must have in your ",{"type":68,"tag":136,"props":145,"children":147},{"className":146},[],[148],{"type":79,"value":149},".env",{"type":79,"value":151}," file. Checkout the doc if you want to know more about ",{"type":68,"tag":82,"props":153,"children":156},{"href":154,"rel":155},"https://supabase.com/docs/learn/auth-deep-dive/auth-deep-dive-jwts#jwts-in-supabase",[86],[157],{"type":79,"value":158},"Supabase keys",{"type":79,"value":125},{"type":68,"tag":75,"props":161,"children":162},{},[163,165,170,172,178],{"type":79,"value":164},"Define your server route and just import the ",{"type":68,"tag":136,"props":166,"children":168},{"className":167},[],[169],{"type":79,"value":37},{"type":79,"value":171}," from ",{"type":68,"tag":136,"props":173,"children":175},{"className":174},[],[176],{"type":79,"value":177},"#supabase/server",{"type":79,"value":125},{"type":68,"tag":180,"props":181,"children":186},"pre",{"className":182,"code":183,"filename":184,"language":185,"meta":61,"style":61},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseServiceRole } from '#supabase/server'\n\nexport default eventHandler(async (event) => {\n  const client = serverSupabaseServiceRole(event)\n\n  const { data } = await client.from('rls-protected-table').select()\n\n  return { sensitiveData: data }\n})\n","server/api/bypass-rls.ts","ts",[187],{"type":68,"tag":136,"props":188,"children":189},{"__ignoreMap":61},[190,239,249,306,343,351,430,438,470],{"type":68,"tag":191,"props":192,"children":195},"span",{"class":193,"line":194},"line",1,[196,202,208,214,219,224,229,234],{"type":68,"tag":191,"props":197,"children":199},{"style":198},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[200],{"type":79,"value":201},"import",{"type":68,"tag":191,"props":203,"children":205},{"style":204},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[206],{"type":79,"value":207}," {",{"type":68,"tag":191,"props":209,"children":211},{"style":210},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[212],{"type":79,"value":213}," serverSupabaseServiceRole",{"type":68,"tag":191,"props":215,"children":216},{"style":204},[217],{"type":79,"value":218}," }",{"type":68,"tag":191,"props":220,"children":221},{"style":198},[222],{"type":79,"value":223}," from",{"type":68,"tag":191,"props":225,"children":226},{"style":204},[227],{"type":79,"value":228}," '",{"type":68,"tag":191,"props":230,"children":232},{"style":231},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[233],{"type":79,"value":177},{"type":68,"tag":191,"props":235,"children":236},{"style":204},[237],{"type":79,"value":238},"'\n",{"type":68,"tag":191,"props":240,"children":242},{"class":193,"line":241},2,[243],{"type":68,"tag":191,"props":244,"children":246},{"emptyLinePlaceholder":245},true,[247],{"type":79,"value":248},"\n",{"type":68,"tag":191,"props":250,"children":252},{"class":193,"line":251},3,[253,258,263,269,274,280,285,291,296,301],{"type":68,"tag":191,"props":254,"children":255},{"style":198},[256],{"type":79,"value":257},"export",{"type":68,"tag":191,"props":259,"children":260},{"style":198},[261],{"type":79,"value":262}," default",{"type":68,"tag":191,"props":264,"children":266},{"style":265},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[267],{"type":79,"value":268}," eventHandler",{"type":68,"tag":191,"props":270,"children":271},{"style":210},[272],{"type":79,"value":273},"(",{"type":68,"tag":191,"props":275,"children":277},{"style":276},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[278],{"type":79,"value":279},"async",{"type":68,"tag":191,"props":281,"children":282},{"style":204},[283],{"type":79,"value":284}," (",{"type":68,"tag":191,"props":286,"children":288},{"style":287},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[289],{"type":79,"value":290},"event",{"type":68,"tag":191,"props":292,"children":293},{"style":204},[294],{"type":79,"value":295},")",{"type":68,"tag":191,"props":297,"children":298},{"style":276},[299],{"type":79,"value":300}," =>",{"type":68,"tag":191,"props":302,"children":303},{"style":204},[304],{"type":79,"value":305}," {\n",{"type":68,"tag":191,"props":307,"children":309},{"class":193,"line":308},4,[310,315,320,325,329,334,338],{"type":68,"tag":191,"props":311,"children":312},{"style":276},[313],{"type":79,"value":314},"  const",{"type":68,"tag":191,"props":316,"children":317},{"style":210},[318],{"type":79,"value":319}," client",{"type":68,"tag":191,"props":321,"children":322},{"style":204},[323],{"type":79,"value":324}," =",{"type":68,"tag":191,"props":326,"children":327},{"style":265},[328],{"type":79,"value":213},{"type":68,"tag":191,"props":330,"children":332},{"style":331},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[333],{"type":79,"value":273},{"type":68,"tag":191,"props":335,"children":336},{"style":210},[337],{"type":79,"value":290},{"type":68,"tag":191,"props":339,"children":340},{"style":331},[341],{"type":79,"value":342},")\n",{"type":68,"tag":191,"props":344,"children":346},{"class":193,"line":345},5,[347],{"type":68,"tag":191,"props":348,"children":349},{"emptyLinePlaceholder":245},[350],{"type":79,"value":248},{"type":68,"tag":191,"props":352,"children":354},{"class":193,"line":353},6,[355,359,363,368,372,376,381,385,389,394,398,403,408,412,416,420,425],{"type":68,"tag":191,"props":356,"children":357},{"style":276},[358],{"type":79,"value":314},{"type":68,"tag":191,"props":360,"children":361},{"style":204},[362],{"type":79,"value":207},{"type":68,"tag":191,"props":364,"children":365},{"style":210},[366],{"type":79,"value":367}," data",{"type":68,"tag":191,"props":369,"children":370},{"style":204},[371],{"type":79,"value":218},{"type":68,"tag":191,"props":373,"children":374},{"style":204},[375],{"type":79,"value":324},{"type":68,"tag":191,"props":377,"children":378},{"style":198},[379],{"type":79,"value":380}," await",{"type":68,"tag":191,"props":382,"children":383},{"style":210},[384],{"type":79,"value":319},{"type":68,"tag":191,"props":386,"children":387},{"style":204},[388],{"type":79,"value":125},{"type":68,"tag":191,"props":390,"children":391},{"style":265},[392],{"type":79,"value":393},"from",{"type":68,"tag":191,"props":395,"children":396},{"style":331},[397],{"type":79,"value":273},{"type":68,"tag":191,"props":399,"children":400},{"style":204},[401],{"type":79,"value":402},"'",{"type":68,"tag":191,"props":404,"children":405},{"style":231},[406],{"type":79,"value":407},"rls-protected-table",{"type":68,"tag":191,"props":409,"children":410},{"style":204},[411],{"type":79,"value":402},{"type":68,"tag":191,"props":413,"children":414},{"style":331},[415],{"type":79,"value":295},{"type":68,"tag":191,"props":417,"children":418},{"style":204},[419],{"type":79,"value":125},{"type":68,"tag":191,"props":421,"children":422},{"style":265},[423],{"type":79,"value":424},"select",{"type":68,"tag":191,"props":426,"children":427},{"style":331},[428],{"type":79,"value":429},"()\n",{"type":68,"tag":191,"props":431,"children":433},{"class":193,"line":432},7,[434],{"type":68,"tag":191,"props":435,"children":436},{"emptyLinePlaceholder":245},[437],{"type":79,"value":248},{"type":68,"tag":191,"props":439,"children":441},{"class":193,"line":440},8,[442,447,451,456,461,465],{"type":68,"tag":191,"props":443,"children":444},{"style":198},[445],{"type":79,"value":446},"  return",{"type":68,"tag":191,"props":448,"children":449},{"style":204},[450],{"type":79,"value":207},{"type":68,"tag":191,"props":452,"children":453},{"style":331},[454],{"type":79,"value":455}," sensitiveData",{"type":68,"tag":191,"props":457,"children":458},{"style":204},[459],{"type":79,"value":460},":",{"type":68,"tag":191,"props":462,"children":463},{"style":210},[464],{"type":79,"value":367},{"type":68,"tag":191,"props":466,"children":467},{"style":204},[468],{"type":79,"value":469}," }\n",{"type":68,"tag":191,"props":471,"children":473},{"class":193,"line":472},9,[474,479],{"type":68,"tag":191,"props":475,"children":476},{"style":204},[477],{"type":79,"value":478},"}",{"type":68,"tag":191,"props":480,"children":481},{"style":210},[482],{"type":79,"value":342},{"type":68,"tag":75,"props":484,"children":485},{},[486],{"type":79,"value":487},"Then call your API route from any vue file:",{"type":68,"tag":180,"props":489,"children":492},{"className":182,"code":490,"filename":491,"language":185,"meta":61,"style":61},"const fetchSensitiveData = async () => {\n  const { sensitiveData } = await useFetch('/api/bypass-rls')\n}\n","pages/index.vue",[493],{"type":68,"tag":136,"props":494,"children":495},{"__ignoreMap":61},[496,532,585],{"type":68,"tag":191,"props":497,"children":498},{"class":193,"line":194},[499,504,509,514,519,524,528],{"type":68,"tag":191,"props":500,"children":501},{"style":276},[502],{"type":79,"value":503},"const",{"type":68,"tag":191,"props":505,"children":506},{"style":210},[507],{"type":79,"value":508}," fetchSensitiveData ",{"type":68,"tag":191,"props":510,"children":511},{"style":204},[512],{"type":79,"value":513},"=",{"type":68,"tag":191,"props":515,"children":516},{"style":276},[517],{"type":79,"value":518}," async",{"type":68,"tag":191,"props":520,"children":521},{"style":204},[522],{"type":79,"value":523}," ()",{"type":68,"tag":191,"props":525,"children":526},{"style":276},[527],{"type":79,"value":300},{"type":68,"tag":191,"props":529,"children":530},{"style":204},[531],{"type":79,"value":305},{"type":68,"tag":191,"props":533,"children":534},{"class":193,"line":241},[535,539,543,547,551,555,559,564,568,572,577,581],{"type":68,"tag":191,"props":536,"children":537},{"style":276},[538],{"type":79,"value":314},{"type":68,"tag":191,"props":540,"children":541},{"style":204},[542],{"type":79,"value":207},{"type":68,"tag":191,"props":544,"children":545},{"style":210},[546],{"type":79,"value":455},{"type":68,"tag":191,"props":548,"children":549},{"style":204},[550],{"type":79,"value":218},{"type":68,"tag":191,"props":552,"children":553},{"style":204},[554],{"type":79,"value":324},{"type":68,"tag":191,"props":556,"children":557},{"style":198},[558],{"type":79,"value":380},{"type":68,"tag":191,"props":560,"children":561},{"style":265},[562],{"type":79,"value":563}," useFetch",{"type":68,"tag":191,"props":565,"children":566},{"style":331},[567],{"type":79,"value":273},{"type":68,"tag":191,"props":569,"children":570},{"style":204},[571],{"type":79,"value":402},{"type":68,"tag":191,"props":573,"children":574},{"style":231},[575],{"type":79,"value":576},"/api/bypass-rls",{"type":68,"tag":191,"props":578,"children":579},{"style":204},[580],{"type":79,"value":402},{"type":68,"tag":191,"props":582,"children":583},{"style":331},[584],{"type":79,"value":342},{"type":68,"tag":191,"props":586,"children":587},{"class":193,"line":251},[588],{"type":68,"tag":191,"props":589,"children":590},{"style":204},[591],{"type":79,"value":592},"}\n",{"type":68,"tag":594,"props":595,"children":596},"style",{},[597],{"type":79,"value":598},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":61,"searchDepth":241,"depth":241,"links":600},[],"markdown","content:4.usage:services:2.serverSupabaseServiceRole.md","content","4.usage/services/2.serverSupabaseServiceRole.md","4.usage/services/2.serverSupabaseServiceRole","md",[608,610],{"_path":35,"title":34,"description":609},"Make requests to the Supabase API on server side with the serverSupabaseClient service",{"_path":41,"title":40,"description":611},"Get your Supabase user's session from serverside with the serverSupabaseUser service",1737376878476]