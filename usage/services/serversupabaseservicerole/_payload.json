[{"data":1,"prerenderedAt":615},["ShallowReactive",2],{"navigation":3,"/usage/services/serversupabaseservicerole":61,"/usage/services/serversupabaseservicerole-surround":610},[4,8,12,49,53,57],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","i-heroicons-rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","i-heroicons-lock-closed",{"title":13,"_path":14,"children":15,"icon":48},"Usage","/usage",[16,32],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23,26,29],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseCookieRedirect","/usage/composables/usesupabasecookieredirect",{"title":27,"_path":28},"useSupabaseSession","/usage/composables/usesupabasesession",{"title":30,"_path":31},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":33,"_path":34,"children":35},"Server services","/usage/services",[36,39,42,45],{"title":37,"_path":38},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":40,"_path":41},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":43,"_path":44},"serverSupabaseSession","/usage/services/serversupabasesession",{"title":46,"_path":47},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":50,"_path":51,"icon":52},"Demo","/demo","i-heroicons-computer-desktop-20-solid",{"title":54,"_path":55,"icon":56},"Changelog","/changelog","i-heroicons-bookmark",{"title":58,"_path":59,"icon":60},"Roadmap","/roadmap","i-heroicons-map",{"_path":41,"_dir":62,"_draft":63,"_partial":63,"_locale":64,"title":40,"description":65,"navigation":66,"body":67,"_type":604,"_id":605,"_source":606,"_file":607,"_stem":608,"_extension":609},"services",false,"","Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",{"title":40},{"type":68,"children":69,"toc":602},"root",[70,95,109,129,163,182,486,491,596],{"type":71,"tag":72,"props":73,"children":76},"element","callout",{"color":74,"icon":75},"amber","i-heroicons-exclamation-triangle-20-solid",[77],{"type":71,"tag":78,"props":79,"children":80},"p",{},[81,84,93],{"type":82,"value":83},"text","This section assumes you're familiar with ",{"type":71,"tag":85,"props":86,"children":90},"a",{"href":87,"rel":88},"https://v3.nuxtjs.org/guide/concepts/server-engine",[89],"nofollow",[91],{"type":82,"value":92},"Nitro",{"type":82,"value":94},", the server engine powered by Nuxt.",{"type":71,"tag":78,"props":96,"children":97},{},[98,100,107],{"type":82,"value":99},"This function is designed to work only in ",{"type":71,"tag":85,"props":101,"children":104},{"href":102,"rel":103},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[89],[105],{"type":82,"value":106},"server routes",{"type":82,"value":108},", there is no vue composable equivalent.",{"type":71,"tag":78,"props":110,"children":111},{},[112,114,118,120,127],{"type":82,"value":113},"It works similary as the ",{"type":71,"tag":85,"props":115,"children":116},{"href":38},[117],{"type":82,"value":37},{"type":82,"value":119}," but it provides a client with super admin rights that can bypass your ",{"type":71,"tag":85,"props":121,"children":124},{"href":122,"rel":123},"https://supabase.com/docs/guides/auth/row-level-security",[89],[125],{"type":82,"value":126},"Row Level Security",{"type":82,"value":128},".",{"type":71,"tag":130,"props":131,"children":132},"blockquote",{},[133],{"type":71,"tag":78,"props":134,"children":135},{},[136,138,145,147,153,155,162],{"type":82,"value":137},"The client is initialized with the ",{"type":71,"tag":139,"props":140,"children":142},"code",{"className":141},[],[143],{"type":82,"value":144},"SUPABASE_SERVICE_KEY",{"type":82,"value":146}," you must have in your ",{"type":71,"tag":139,"props":148,"children":150},{"className":149},[],[151],{"type":82,"value":152},".env",{"type":82,"value":154}," file. Checkout the doc if you want to know more about ",{"type":71,"tag":85,"props":156,"children":159},{"href":157,"rel":158},"https://supabase.com/docs/learn/auth-deep-dive/auth-deep-dive-jwts#jwts-in-supabase",[89],[160],{"type":82,"value":161},"Supabase keys",{"type":82,"value":128},{"type":71,"tag":78,"props":164,"children":165},{},[166,168,173,175,181],{"type":82,"value":167},"Define your server route and just import the ",{"type":71,"tag":139,"props":169,"children":171},{"className":170},[],[172],{"type":82,"value":40},{"type":82,"value":174}," from ",{"type":71,"tag":139,"props":176,"children":178},{"className":177},[],[179],{"type":82,"value":180},"#supabase/server",{"type":82,"value":128},{"type":71,"tag":183,"props":184,"children":189},"pre",{"className":185,"code":186,"filename":187,"language":188,"meta":64,"style":64},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseServiceRole } from '#supabase/server'\n\nexport default eventHandler(async (event) => {\n  const client = serverSupabaseServiceRole(event)\n\n  const { data } = await client.from('rls-protected-table').select()\n\n  return { sensitiveData: data }\n})\n","server/api/bypass-rls.ts","ts",[190],{"type":71,"tag":139,"props":191,"children":192},{"__ignoreMap":64},[193,242,252,309,346,354,433,441,473],{"type":71,"tag":194,"props":195,"children":198},"span",{"class":196,"line":197},"line",1,[199,205,211,217,222,227,232,237],{"type":71,"tag":194,"props":200,"children":202},{"style":201},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[203],{"type":82,"value":204},"import",{"type":71,"tag":194,"props":206,"children":208},{"style":207},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[209],{"type":82,"value":210}," {",{"type":71,"tag":194,"props":212,"children":214},{"style":213},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[215],{"type":82,"value":216}," serverSupabaseServiceRole",{"type":71,"tag":194,"props":218,"children":219},{"style":207},[220],{"type":82,"value":221}," }",{"type":71,"tag":194,"props":223,"children":224},{"style":201},[225],{"type":82,"value":226}," from",{"type":71,"tag":194,"props":228,"children":229},{"style":207},[230],{"type":82,"value":231}," '",{"type":71,"tag":194,"props":233,"children":235},{"style":234},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[236],{"type":82,"value":180},{"type":71,"tag":194,"props":238,"children":239},{"style":207},[240],{"type":82,"value":241},"'\n",{"type":71,"tag":194,"props":243,"children":245},{"class":196,"line":244},2,[246],{"type":71,"tag":194,"props":247,"children":249},{"emptyLinePlaceholder":248},true,[250],{"type":82,"value":251},"\n",{"type":71,"tag":194,"props":253,"children":255},{"class":196,"line":254},3,[256,261,266,272,277,283,288,294,299,304],{"type":71,"tag":194,"props":257,"children":258},{"style":201},[259],{"type":82,"value":260},"export",{"type":71,"tag":194,"props":262,"children":263},{"style":201},[264],{"type":82,"value":265}," default",{"type":71,"tag":194,"props":267,"children":269},{"style":268},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[270],{"type":82,"value":271}," eventHandler",{"type":71,"tag":194,"props":273,"children":274},{"style":213},[275],{"type":82,"value":276},"(",{"type":71,"tag":194,"props":278,"children":280},{"style":279},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[281],{"type":82,"value":282},"async",{"type":71,"tag":194,"props":284,"children":285},{"style":207},[286],{"type":82,"value":287}," (",{"type":71,"tag":194,"props":289,"children":291},{"style":290},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[292],{"type":82,"value":293},"event",{"type":71,"tag":194,"props":295,"children":296},{"style":207},[297],{"type":82,"value":298},")",{"type":71,"tag":194,"props":300,"children":301},{"style":279},[302],{"type":82,"value":303}," =>",{"type":71,"tag":194,"props":305,"children":306},{"style":207},[307],{"type":82,"value":308}," {\n",{"type":71,"tag":194,"props":310,"children":312},{"class":196,"line":311},4,[313,318,323,328,332,337,341],{"type":71,"tag":194,"props":314,"children":315},{"style":279},[316],{"type":82,"value":317},"  const",{"type":71,"tag":194,"props":319,"children":320},{"style":213},[321],{"type":82,"value":322}," client",{"type":71,"tag":194,"props":324,"children":325},{"style":207},[326],{"type":82,"value":327}," =",{"type":71,"tag":194,"props":329,"children":330},{"style":268},[331],{"type":82,"value":216},{"type":71,"tag":194,"props":333,"children":335},{"style":334},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[336],{"type":82,"value":276},{"type":71,"tag":194,"props":338,"children":339},{"style":213},[340],{"type":82,"value":293},{"type":71,"tag":194,"props":342,"children":343},{"style":334},[344],{"type":82,"value":345},")\n",{"type":71,"tag":194,"props":347,"children":349},{"class":196,"line":348},5,[350],{"type":71,"tag":194,"props":351,"children":352},{"emptyLinePlaceholder":248},[353],{"type":82,"value":251},{"type":71,"tag":194,"props":355,"children":357},{"class":196,"line":356},6,[358,362,366,371,375,379,384,388,392,397,401,406,411,415,419,423,428],{"type":71,"tag":194,"props":359,"children":360},{"style":279},[361],{"type":82,"value":317},{"type":71,"tag":194,"props":363,"children":364},{"style":207},[365],{"type":82,"value":210},{"type":71,"tag":194,"props":367,"children":368},{"style":213},[369],{"type":82,"value":370}," data",{"type":71,"tag":194,"props":372,"children":373},{"style":207},[374],{"type":82,"value":221},{"type":71,"tag":194,"props":376,"children":377},{"style":207},[378],{"type":82,"value":327},{"type":71,"tag":194,"props":380,"children":381},{"style":201},[382],{"type":82,"value":383}," await",{"type":71,"tag":194,"props":385,"children":386},{"style":213},[387],{"type":82,"value":322},{"type":71,"tag":194,"props":389,"children":390},{"style":207},[391],{"type":82,"value":128},{"type":71,"tag":194,"props":393,"children":394},{"style":268},[395],{"type":82,"value":396},"from",{"type":71,"tag":194,"props":398,"children":399},{"style":334},[400],{"type":82,"value":276},{"type":71,"tag":194,"props":402,"children":403},{"style":207},[404],{"type":82,"value":405},"'",{"type":71,"tag":194,"props":407,"children":408},{"style":234},[409],{"type":82,"value":410},"rls-protected-table",{"type":71,"tag":194,"props":412,"children":413},{"style":207},[414],{"type":82,"value":405},{"type":71,"tag":194,"props":416,"children":417},{"style":334},[418],{"type":82,"value":298},{"type":71,"tag":194,"props":420,"children":421},{"style":207},[422],{"type":82,"value":128},{"type":71,"tag":194,"props":424,"children":425},{"style":268},[426],{"type":82,"value":427},"select",{"type":71,"tag":194,"props":429,"children":430},{"style":334},[431],{"type":82,"value":432},"()\n",{"type":71,"tag":194,"props":434,"children":436},{"class":196,"line":435},7,[437],{"type":71,"tag":194,"props":438,"children":439},{"emptyLinePlaceholder":248},[440],{"type":82,"value":251},{"type":71,"tag":194,"props":442,"children":444},{"class":196,"line":443},8,[445,450,454,459,464,468],{"type":71,"tag":194,"props":446,"children":447},{"style":201},[448],{"type":82,"value":449},"  return",{"type":71,"tag":194,"props":451,"children":452},{"style":207},[453],{"type":82,"value":210},{"type":71,"tag":194,"props":455,"children":456},{"style":334},[457],{"type":82,"value":458}," sensitiveData",{"type":71,"tag":194,"props":460,"children":461},{"style":207},[462],{"type":82,"value":463},":",{"type":71,"tag":194,"props":465,"children":466},{"style":213},[467],{"type":82,"value":370},{"type":71,"tag":194,"props":469,"children":470},{"style":207},[471],{"type":82,"value":472}," }\n",{"type":71,"tag":194,"props":474,"children":476},{"class":196,"line":475},9,[477,482],{"type":71,"tag":194,"props":478,"children":479},{"style":207},[480],{"type":82,"value":481},"}",{"type":71,"tag":194,"props":483,"children":484},{"style":213},[485],{"type":82,"value":345},{"type":71,"tag":78,"props":487,"children":488},{},[489],{"type":82,"value":490},"Then call your API route from any vue file:",{"type":71,"tag":183,"props":492,"children":495},{"className":185,"code":493,"filename":494,"language":188,"meta":64,"style":64},"const fetchSensitiveData = async () => {\n  const { sensitiveData } = await useFetch('/api/bypass-rls')\n}\n","pages/index.vue",[496],{"type":71,"tag":139,"props":497,"children":498},{"__ignoreMap":64},[499,535,588],{"type":71,"tag":194,"props":500,"children":501},{"class":196,"line":197},[502,507,512,517,522,527,531],{"type":71,"tag":194,"props":503,"children":504},{"style":279},[505],{"type":82,"value":506},"const",{"type":71,"tag":194,"props":508,"children":509},{"style":213},[510],{"type":82,"value":511}," fetchSensitiveData ",{"type":71,"tag":194,"props":513,"children":514},{"style":207},[515],{"type":82,"value":516},"=",{"type":71,"tag":194,"props":518,"children":519},{"style":279},[520],{"type":82,"value":521}," async",{"type":71,"tag":194,"props":523,"children":524},{"style":207},[525],{"type":82,"value":526}," ()",{"type":71,"tag":194,"props":528,"children":529},{"style":279},[530],{"type":82,"value":303},{"type":71,"tag":194,"props":532,"children":533},{"style":207},[534],{"type":82,"value":308},{"type":71,"tag":194,"props":536,"children":537},{"class":196,"line":244},[538,542,546,550,554,558,562,567,571,575,580,584],{"type":71,"tag":194,"props":539,"children":540},{"style":279},[541],{"type":82,"value":317},{"type":71,"tag":194,"props":543,"children":544},{"style":207},[545],{"type":82,"value":210},{"type":71,"tag":194,"props":547,"children":548},{"style":213},[549],{"type":82,"value":458},{"type":71,"tag":194,"props":551,"children":552},{"style":207},[553],{"type":82,"value":221},{"type":71,"tag":194,"props":555,"children":556},{"style":207},[557],{"type":82,"value":327},{"type":71,"tag":194,"props":559,"children":560},{"style":201},[561],{"type":82,"value":383},{"type":71,"tag":194,"props":563,"children":564},{"style":268},[565],{"type":82,"value":566}," useFetch",{"type":71,"tag":194,"props":568,"children":569},{"style":334},[570],{"type":82,"value":276},{"type":71,"tag":194,"props":572,"children":573},{"style":207},[574],{"type":82,"value":405},{"type":71,"tag":194,"props":576,"children":577},{"style":234},[578],{"type":82,"value":579},"/api/bypass-rls",{"type":71,"tag":194,"props":581,"children":582},{"style":207},[583],{"type":82,"value":405},{"type":71,"tag":194,"props":585,"children":586},{"style":334},[587],{"type":82,"value":345},{"type":71,"tag":194,"props":589,"children":590},{"class":196,"line":254},[591],{"type":71,"tag":194,"props":592,"children":593},{"style":207},[594],{"type":82,"value":595},"}\n",{"type":71,"tag":597,"props":598,"children":599},"style",{},[600],{"type":82,"value":601},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":64,"searchDepth":244,"depth":244,"links":603},[],"markdown","content:4.usage:services:2.serverSupabaseServiceRole.md","content","4.usage/services/2.serverSupabaseServiceRole.md","4.usage/services/2.serverSupabaseServiceRole","md",[611,613],{"_path":38,"title":37,"description":612},"Make requests to the Supabase API on server side with the serverSupabaseClient service",{"_path":44,"title":43,"description":614},"Get your Supabase user's session from serverside with the serverSupabaseUser service",1740754681436]