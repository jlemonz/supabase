[{"data":1,"prerenderedAt":680},["ShallowReactive",2],{"navigation":3,"/usage/services/serversupabaseuser":61,"/usage/services/serversupabaseuser-surround":675},[4,8,12,49,53,57],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","i-heroicons-rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","i-heroicons-lock-closed",{"title":13,"_path":14,"children":15,"icon":48},"Usage","/usage",[16,32],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23,26,29],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseCookieRedirect","/usage/composables/usesupabasecookieredirect",{"title":27,"_path":28},"useSupabaseSession","/usage/composables/usesupabasesession",{"title":30,"_path":31},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":33,"_path":34,"children":35},"Server services","/usage/services",[36,39,42,45],{"title":37,"_path":38},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":40,"_path":41},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":43,"_path":44},"serverSupabaseSession","/usage/services/serversupabasesession",{"title":46,"_path":47},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":50,"_path":51,"icon":52},"Demo","/demo","i-heroicons-computer-desktop-20-solid",{"title":54,"_path":55,"icon":56},"Changelog","/changelog","i-heroicons-bookmark",{"title":58,"_path":59,"icon":60},"Roadmap","/roadmap","i-heroicons-map",{"_path":47,"_dir":62,"_draft":63,"_partial":63,"_locale":64,"title":46,"description":65,"body":66,"_type":669,"_id":670,"_source":671,"_file":672,"_stem":673,"_extension":674},"services",false,"","Get your Supabase user from serverside with the serverSupabaseUser service",{"type":67,"children":68,"toc":667},"root",[69,94,114,134,306,311,457,471,661],{"type":70,"tag":71,"props":72,"children":75},"element","callout",{"color":73,"icon":74},"amber","i-heroicons-exclamation-triangle-20-solid",[76],{"type":70,"tag":77,"props":78,"children":79},"p",{},[80,83,92],{"type":81,"value":82},"text","This section assumes you're familiar with ",{"type":70,"tag":84,"props":85,"children":89},"a",{"href":86,"rel":87},"https://v3.nuxtjs.org/guide/concepts/server-engine",[88],"nofollow",[90],{"type":81,"value":91},"Nitro",{"type":81,"value":93},", the server engine powered by Nuxt.",{"type":70,"tag":77,"props":95,"children":96},{},[97,99,103,105,112],{"type":81,"value":98},"This function is similar to the ",{"type":70,"tag":84,"props":100,"children":101},{"href":31},[102],{"type":81,"value":30},{"type":81,"value":104}," composable but is used in ",{"type":70,"tag":84,"props":106,"children":109},{"href":107,"rel":108},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[88],[110],{"type":81,"value":111},"server routes",{"type":81,"value":113},".",{"type":70,"tag":77,"props":115,"children":116},{},[117,119,125,127,133],{"type":81,"value":118},"Define your server route and import the ",{"type":70,"tag":120,"props":121,"children":123},"code",{"className":122},[],[124],{"type":81,"value":46},{"type":81,"value":126}," from ",{"type":70,"tag":120,"props":128,"children":130},{"className":129},[],[131],{"type":81,"value":132},"#supabase/server",{"type":81,"value":113},{"type":70,"tag":135,"props":136,"children":141},"pre",{"className":137,"code":138,"filename":139,"language":140,"meta":64,"style":64},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseUser } from '#supabase/server'\n\nexport default defineEventHandler(async (event) => {\n  return await serverSupabaseUser(event)\n})\n","server/api/me.ts","ts",[142],{"type":70,"tag":120,"props":143,"children":144},{"__ignoreMap":64},[145,194,204,261,293],{"type":70,"tag":146,"props":147,"children":150},"span",{"class":148,"line":149},"line",1,[151,157,163,169,174,179,184,189],{"type":70,"tag":146,"props":152,"children":154},{"style":153},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[155],{"type":81,"value":156},"import",{"type":70,"tag":146,"props":158,"children":160},{"style":159},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[161],{"type":81,"value":162}," {",{"type":70,"tag":146,"props":164,"children":166},{"style":165},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[167],{"type":81,"value":168}," serverSupabaseUser",{"type":70,"tag":146,"props":170,"children":171},{"style":159},[172],{"type":81,"value":173}," }",{"type":70,"tag":146,"props":175,"children":176},{"style":153},[177],{"type":81,"value":178}," from",{"type":70,"tag":146,"props":180,"children":181},{"style":159},[182],{"type":81,"value":183}," '",{"type":70,"tag":146,"props":185,"children":187},{"style":186},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[188],{"type":81,"value":132},{"type":70,"tag":146,"props":190,"children":191},{"style":159},[192],{"type":81,"value":193},"'\n",{"type":70,"tag":146,"props":195,"children":197},{"class":148,"line":196},2,[198],{"type":70,"tag":146,"props":199,"children":201},{"emptyLinePlaceholder":200},true,[202],{"type":81,"value":203},"\n",{"type":70,"tag":146,"props":205,"children":207},{"class":148,"line":206},3,[208,213,218,224,229,235,240,246,251,256],{"type":70,"tag":146,"props":209,"children":210},{"style":153},[211],{"type":81,"value":212},"export",{"type":70,"tag":146,"props":214,"children":215},{"style":153},[216],{"type":81,"value":217}," default",{"type":70,"tag":146,"props":219,"children":221},{"style":220},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[222],{"type":81,"value":223}," defineEventHandler",{"type":70,"tag":146,"props":225,"children":226},{"style":165},[227],{"type":81,"value":228},"(",{"type":70,"tag":146,"props":230,"children":232},{"style":231},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[233],{"type":81,"value":234},"async",{"type":70,"tag":146,"props":236,"children":237},{"style":159},[238],{"type":81,"value":239}," (",{"type":70,"tag":146,"props":241,"children":243},{"style":242},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[244],{"type":81,"value":245},"event",{"type":70,"tag":146,"props":247,"children":248},{"style":159},[249],{"type":81,"value":250},")",{"type":70,"tag":146,"props":252,"children":253},{"style":231},[254],{"type":81,"value":255}," =>",{"type":70,"tag":146,"props":257,"children":258},{"style":159},[259],{"type":81,"value":260}," {\n",{"type":70,"tag":146,"props":262,"children":264},{"class":148,"line":263},4,[265,270,275,279,284,288],{"type":70,"tag":146,"props":266,"children":267},{"style":153},[268],{"type":81,"value":269},"  return",{"type":70,"tag":146,"props":271,"children":272},{"style":153},[273],{"type":81,"value":274}," await",{"type":70,"tag":146,"props":276,"children":277},{"style":220},[278],{"type":81,"value":168},{"type":70,"tag":146,"props":280,"children":282},{"style":281},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[283],{"type":81,"value":228},{"type":70,"tag":146,"props":285,"children":286},{"style":165},[287],{"type":81,"value":245},{"type":70,"tag":146,"props":289,"children":290},{"style":281},[291],{"type":81,"value":292},")\n",{"type":70,"tag":146,"props":294,"children":296},{"class":148,"line":295},5,[297,302],{"type":70,"tag":146,"props":298,"children":299},{"style":159},[300],{"type":81,"value":301},"}",{"type":70,"tag":146,"props":303,"children":304},{"style":165},[305],{"type":81,"value":292},{"type":70,"tag":77,"props":307,"children":308},{},[309],{"type":81,"value":310},"Then call your api route from any vue file:",{"type":70,"tag":135,"props":312,"children":315},{"className":137,"code":313,"filename":314,"language":140,"meta":64,"style":64},"const user = ref(null)\n\nconst fetchMe = async () => {\n   user.value = await $fetch('/api/me')\n}\n","pages/index.vue",[316],{"type":70,"tag":120,"props":317,"children":318},{"__ignoreMap":64},[319,355,362,396,449],{"type":70,"tag":146,"props":320,"children":321},{"class":148,"line":149},[322,327,332,337,342,346,351],{"type":70,"tag":146,"props":323,"children":324},{"style":231},[325],{"type":81,"value":326},"const",{"type":70,"tag":146,"props":328,"children":329},{"style":165},[330],{"type":81,"value":331}," user ",{"type":70,"tag":146,"props":333,"children":334},{"style":159},[335],{"type":81,"value":336},"=",{"type":70,"tag":146,"props":338,"children":339},{"style":220},[340],{"type":81,"value":341}," ref",{"type":70,"tag":146,"props":343,"children":344},{"style":165},[345],{"type":81,"value":228},{"type":70,"tag":146,"props":347,"children":348},{"style":159},[349],{"type":81,"value":350},"null",{"type":70,"tag":146,"props":352,"children":353},{"style":165},[354],{"type":81,"value":292},{"type":70,"tag":146,"props":356,"children":357},{"class":148,"line":196},[358],{"type":70,"tag":146,"props":359,"children":360},{"emptyLinePlaceholder":200},[361],{"type":81,"value":203},{"type":70,"tag":146,"props":363,"children":364},{"class":148,"line":206},[365,369,374,378,383,388,392],{"type":70,"tag":146,"props":366,"children":367},{"style":231},[368],{"type":81,"value":326},{"type":70,"tag":146,"props":370,"children":371},{"style":165},[372],{"type":81,"value":373}," fetchMe ",{"type":70,"tag":146,"props":375,"children":376},{"style":159},[377],{"type":81,"value":336},{"type":70,"tag":146,"props":379,"children":380},{"style":231},[381],{"type":81,"value":382}," async",{"type":70,"tag":146,"props":384,"children":385},{"style":159},[386],{"type":81,"value":387}," ()",{"type":70,"tag":146,"props":389,"children":390},{"style":231},[391],{"type":81,"value":255},{"type":70,"tag":146,"props":393,"children":394},{"style":159},[395],{"type":81,"value":260},{"type":70,"tag":146,"props":397,"children":398},{"class":148,"line":263},[399,404,408,413,418,422,427,431,436,441,445],{"type":70,"tag":146,"props":400,"children":401},{"style":165},[402],{"type":81,"value":403},"   user",{"type":70,"tag":146,"props":405,"children":406},{"style":159},[407],{"type":81,"value":113},{"type":70,"tag":146,"props":409,"children":410},{"style":165},[411],{"type":81,"value":412},"value",{"type":70,"tag":146,"props":414,"children":415},{"style":159},[416],{"type":81,"value":417}," =",{"type":70,"tag":146,"props":419,"children":420},{"style":153},[421],{"type":81,"value":274},{"type":70,"tag":146,"props":423,"children":424},{"style":220},[425],{"type":81,"value":426}," $fetch",{"type":70,"tag":146,"props":428,"children":429},{"style":281},[430],{"type":81,"value":228},{"type":70,"tag":146,"props":432,"children":433},{"style":159},[434],{"type":81,"value":435},"'",{"type":70,"tag":146,"props":437,"children":438},{"style":186},[439],{"type":81,"value":440},"/api/me",{"type":70,"tag":146,"props":442,"children":443},{"style":159},[444],{"type":81,"value":435},{"type":70,"tag":146,"props":446,"children":447},{"style":281},[448],{"type":81,"value":292},{"type":70,"tag":146,"props":450,"children":451},{"class":148,"line":295},[452],{"type":70,"tag":146,"props":453,"children":454},{"style":159},[455],{"type":81,"value":456},"}\n",{"type":70,"tag":77,"props":458,"children":459},{},[460,462,469],{"type":81,"value":461},"Be careful, if you want to call this route on SSR, please read this ",{"type":70,"tag":84,"props":463,"children":466},{"href":464,"rel":465},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[88],[467],{"type":81,"value":468},"section",{"type":81,"value":470},", you must send your browser cookies including your supabase token.",{"type":70,"tag":135,"props":472,"children":474},{"className":137,"code":473,"filename":314,"language":140,"meta":64,"style":64},"const user = ref(null)\n\nconst { data } = await useFetch('/api/me', {\n  headers: useRequestHeaders(['cookie'])\n})\n\nuser.value = data\n",[475],{"type":70,"tag":120,"props":476,"children":477},{"__ignoreMap":64},[478,509,516,574,615,626,634],{"type":70,"tag":146,"props":479,"children":480},{"class":148,"line":149},[481,485,489,493,497,501,505],{"type":70,"tag":146,"props":482,"children":483},{"style":231},[484],{"type":81,"value":326},{"type":70,"tag":146,"props":486,"children":487},{"style":165},[488],{"type":81,"value":331},{"type":70,"tag":146,"props":490,"children":491},{"style":159},[492],{"type":81,"value":336},{"type":70,"tag":146,"props":494,"children":495},{"style":220},[496],{"type":81,"value":341},{"type":70,"tag":146,"props":498,"children":499},{"style":165},[500],{"type":81,"value":228},{"type":70,"tag":146,"props":502,"children":503},{"style":159},[504],{"type":81,"value":350},{"type":70,"tag":146,"props":506,"children":507},{"style":165},[508],{"type":81,"value":292},{"type":70,"tag":146,"props":510,"children":511},{"class":148,"line":196},[512],{"type":70,"tag":146,"props":513,"children":514},{"emptyLinePlaceholder":200},[515],{"type":81,"value":203},{"type":70,"tag":146,"props":517,"children":518},{"class":148,"line":206},[519,523,527,532,536,540,544,549,553,557,561,565,570],{"type":70,"tag":146,"props":520,"children":521},{"style":231},[522],{"type":81,"value":326},{"type":70,"tag":146,"props":524,"children":525},{"style":159},[526],{"type":81,"value":162},{"type":70,"tag":146,"props":528,"children":529},{"style":165},[530],{"type":81,"value":531}," data ",{"type":70,"tag":146,"props":533,"children":534},{"style":159},[535],{"type":81,"value":301},{"type":70,"tag":146,"props":537,"children":538},{"style":159},[539],{"type":81,"value":417},{"type":70,"tag":146,"props":541,"children":542},{"style":153},[543],{"type":81,"value":274},{"type":70,"tag":146,"props":545,"children":546},{"style":220},[547],{"type":81,"value":548}," useFetch",{"type":70,"tag":146,"props":550,"children":551},{"style":165},[552],{"type":81,"value":228},{"type":70,"tag":146,"props":554,"children":555},{"style":159},[556],{"type":81,"value":435},{"type":70,"tag":146,"props":558,"children":559},{"style":186},[560],{"type":81,"value":440},{"type":70,"tag":146,"props":562,"children":563},{"style":159},[564],{"type":81,"value":435},{"type":70,"tag":146,"props":566,"children":567},{"style":159},[568],{"type":81,"value":569},",",{"type":70,"tag":146,"props":571,"children":572},{"style":159},[573],{"type":81,"value":260},{"type":70,"tag":146,"props":575,"children":576},{"class":148,"line":263},[577,582,587,592,597,601,606,610],{"type":70,"tag":146,"props":578,"children":579},{"style":281},[580],{"type":81,"value":581},"  headers",{"type":70,"tag":146,"props":583,"children":584},{"style":159},[585],{"type":81,"value":586},":",{"type":70,"tag":146,"props":588,"children":589},{"style":220},[590],{"type":81,"value":591}," useRequestHeaders",{"type":70,"tag":146,"props":593,"children":594},{"style":165},[595],{"type":81,"value":596},"([",{"type":70,"tag":146,"props":598,"children":599},{"style":159},[600],{"type":81,"value":435},{"type":70,"tag":146,"props":602,"children":603},{"style":186},[604],{"type":81,"value":605},"cookie",{"type":70,"tag":146,"props":607,"children":608},{"style":159},[609],{"type":81,"value":435},{"type":70,"tag":146,"props":611,"children":612},{"style":165},[613],{"type":81,"value":614},"])\n",{"type":70,"tag":146,"props":616,"children":617},{"class":148,"line":295},[618,622],{"type":70,"tag":146,"props":619,"children":620},{"style":159},[621],{"type":81,"value":301},{"type":70,"tag":146,"props":623,"children":624},{"style":165},[625],{"type":81,"value":292},{"type":70,"tag":146,"props":627,"children":629},{"class":148,"line":628},6,[630],{"type":70,"tag":146,"props":631,"children":632},{"emptyLinePlaceholder":200},[633],{"type":81,"value":203},{"type":70,"tag":146,"props":635,"children":637},{"class":148,"line":636},7,[638,643,647,652,656],{"type":70,"tag":146,"props":639,"children":640},{"style":165},[641],{"type":81,"value":642},"user",{"type":70,"tag":146,"props":644,"children":645},{"style":159},[646],{"type":81,"value":113},{"type":70,"tag":146,"props":648,"children":649},{"style":165},[650],{"type":81,"value":651},"value ",{"type":70,"tag":146,"props":653,"children":654},{"style":159},[655],{"type":81,"value":336},{"type":70,"tag":146,"props":657,"children":658},{"style":165},[659],{"type":81,"value":660}," data\n",{"type":70,"tag":662,"props":663,"children":664},"style",{},[665],{"type":81,"value":666},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":64,"searchDepth":196,"depth":196,"links":668},[],"markdown","content:4.usage:services:4.serverSupabaseUser.md","content","4.usage/services/4.serverSupabaseUser.md","4.usage/services/4.serverSupabaseUser","md",[676,678],{"_path":44,"title":43,"description":677},"Get your Supabase user's session from serverside with the serverSupabaseUser service",{"_path":51,"title":50,"description":679},"Demonstration of using Supabase with Nuxt.",1740754681446]