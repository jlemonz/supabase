[{"data":1,"prerenderedAt":677},["ShallowReactive",2],{"navigation":3,"/usage/services/serversupabaseuser":58,"/usage/services/serversupabaseuser-surround":672},[4,8,12,46,50,54],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","i-heroicons-rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","i-heroicons-lock-closed",{"title":13,"_path":14,"children":15,"icon":45},"Usage","/usage",[16,29],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23,26],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseSession","/usage/composables/usesupabasesession",{"title":27,"_path":28},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":30,"_path":31,"children":32},"Server services","/usage/services",[33,36,39,42],{"title":34,"_path":35},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":37,"_path":38},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":40,"_path":41},"serverSupabaseSession","/usage/services/serversupabasesession",{"title":43,"_path":44},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":47,"_path":48,"icon":49},"Demo","/demo","i-heroicons-computer-desktop-20-solid",{"title":51,"_path":52,"icon":53},"Changelog","/changelog","i-heroicons-bookmark",{"title":55,"_path":56,"icon":57},"Roadmap","/roadmap","i-heroicons-map",{"_path":44,"_dir":59,"_draft":60,"_partial":60,"_locale":61,"title":43,"description":62,"body":63,"_type":666,"_id":667,"_source":668,"_file":669,"_stem":670,"_extension":671},"services",false,"","Get your Supabase user from serverside with the serverSupabaseUser service",{"type":64,"children":65,"toc":664},"root",[66,91,111,131,303,308,454,468,658],{"type":67,"tag":68,"props":69,"children":72},"element","callout",{"color":70,"icon":71},"amber","i-heroicons-exclamation-triangle-20-solid",[73],{"type":67,"tag":74,"props":75,"children":76},"p",{},[77,80,89],{"type":78,"value":79},"text","This section assumes you're familiar with ",{"type":67,"tag":81,"props":82,"children":86},"a",{"href":83,"rel":84},"https://v3.nuxtjs.org/guide/concepts/server-engine",[85],"nofollow",[87],{"type":78,"value":88},"Nitro",{"type":78,"value":90},", the server engine powered by Nuxt.",{"type":67,"tag":74,"props":92,"children":93},{},[94,96,100,102,109],{"type":78,"value":95},"This function is similar to the ",{"type":67,"tag":81,"props":97,"children":98},{"href":28},[99],{"type":78,"value":27},{"type":78,"value":101}," composable but is used in ",{"type":67,"tag":81,"props":103,"children":106},{"href":104,"rel":105},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[85],[107],{"type":78,"value":108},"server routes",{"type":78,"value":110},".",{"type":67,"tag":74,"props":112,"children":113},{},[114,116,122,124,130],{"type":78,"value":115},"Define your server route and import the ",{"type":67,"tag":117,"props":118,"children":120},"code",{"className":119},[],[121],{"type":78,"value":43},{"type":78,"value":123}," from ",{"type":67,"tag":117,"props":125,"children":127},{"className":126},[],[128],{"type":78,"value":129},"#supabase/server",{"type":78,"value":110},{"type":67,"tag":132,"props":133,"children":138},"pre",{"className":134,"code":135,"filename":136,"language":137,"meta":61,"style":61},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseUser } from '#supabase/server'\n\nexport default defineEventHandler(async (event) => {\n  return await serverSupabaseUser(event)\n})\n","server/api/me.ts","ts",[139],{"type":67,"tag":117,"props":140,"children":141},{"__ignoreMap":61},[142,191,201,258,290],{"type":67,"tag":143,"props":144,"children":147},"span",{"class":145,"line":146},"line",1,[148,154,160,166,171,176,181,186],{"type":67,"tag":143,"props":149,"children":151},{"style":150},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[152],{"type":78,"value":153},"import",{"type":67,"tag":143,"props":155,"children":157},{"style":156},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[158],{"type":78,"value":159}," {",{"type":67,"tag":143,"props":161,"children":163},{"style":162},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[164],{"type":78,"value":165}," serverSupabaseUser",{"type":67,"tag":143,"props":167,"children":168},{"style":156},[169],{"type":78,"value":170}," }",{"type":67,"tag":143,"props":172,"children":173},{"style":150},[174],{"type":78,"value":175}," from",{"type":67,"tag":143,"props":177,"children":178},{"style":156},[179],{"type":78,"value":180}," '",{"type":67,"tag":143,"props":182,"children":184},{"style":183},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[185],{"type":78,"value":129},{"type":67,"tag":143,"props":187,"children":188},{"style":156},[189],{"type":78,"value":190},"'\n",{"type":67,"tag":143,"props":192,"children":194},{"class":145,"line":193},2,[195],{"type":67,"tag":143,"props":196,"children":198},{"emptyLinePlaceholder":197},true,[199],{"type":78,"value":200},"\n",{"type":67,"tag":143,"props":202,"children":204},{"class":145,"line":203},3,[205,210,215,221,226,232,237,243,248,253],{"type":67,"tag":143,"props":206,"children":207},{"style":150},[208],{"type":78,"value":209},"export",{"type":67,"tag":143,"props":211,"children":212},{"style":150},[213],{"type":78,"value":214}," default",{"type":67,"tag":143,"props":216,"children":218},{"style":217},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[219],{"type":78,"value":220}," defineEventHandler",{"type":67,"tag":143,"props":222,"children":223},{"style":162},[224],{"type":78,"value":225},"(",{"type":67,"tag":143,"props":227,"children":229},{"style":228},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[230],{"type":78,"value":231},"async",{"type":67,"tag":143,"props":233,"children":234},{"style":156},[235],{"type":78,"value":236}," (",{"type":67,"tag":143,"props":238,"children":240},{"style":239},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[241],{"type":78,"value":242},"event",{"type":67,"tag":143,"props":244,"children":245},{"style":156},[246],{"type":78,"value":247},")",{"type":67,"tag":143,"props":249,"children":250},{"style":228},[251],{"type":78,"value":252}," =>",{"type":67,"tag":143,"props":254,"children":255},{"style":156},[256],{"type":78,"value":257}," {\n",{"type":67,"tag":143,"props":259,"children":261},{"class":145,"line":260},4,[262,267,272,276,281,285],{"type":67,"tag":143,"props":263,"children":264},{"style":150},[265],{"type":78,"value":266},"  return",{"type":67,"tag":143,"props":268,"children":269},{"style":150},[270],{"type":78,"value":271}," await",{"type":67,"tag":143,"props":273,"children":274},{"style":217},[275],{"type":78,"value":165},{"type":67,"tag":143,"props":277,"children":279},{"style":278},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[280],{"type":78,"value":225},{"type":67,"tag":143,"props":282,"children":283},{"style":162},[284],{"type":78,"value":242},{"type":67,"tag":143,"props":286,"children":287},{"style":278},[288],{"type":78,"value":289},")\n",{"type":67,"tag":143,"props":291,"children":293},{"class":145,"line":292},5,[294,299],{"type":67,"tag":143,"props":295,"children":296},{"style":156},[297],{"type":78,"value":298},"}",{"type":67,"tag":143,"props":300,"children":301},{"style":162},[302],{"type":78,"value":289},{"type":67,"tag":74,"props":304,"children":305},{},[306],{"type":78,"value":307},"Then call your api route from any vue file:",{"type":67,"tag":132,"props":309,"children":312},{"className":134,"code":310,"filename":311,"language":137,"meta":61,"style":61},"const user = ref(null)\n\nconst fetchMe = async () => {\n   user.value = await $fetch('/api/me')\n}\n","pages/index.vue",[313],{"type":67,"tag":117,"props":314,"children":315},{"__ignoreMap":61},[316,352,359,393,446],{"type":67,"tag":143,"props":317,"children":318},{"class":145,"line":146},[319,324,329,334,339,343,348],{"type":67,"tag":143,"props":320,"children":321},{"style":228},[322],{"type":78,"value":323},"const",{"type":67,"tag":143,"props":325,"children":326},{"style":162},[327],{"type":78,"value":328}," user ",{"type":67,"tag":143,"props":330,"children":331},{"style":156},[332],{"type":78,"value":333},"=",{"type":67,"tag":143,"props":335,"children":336},{"style":217},[337],{"type":78,"value":338}," ref",{"type":67,"tag":143,"props":340,"children":341},{"style":162},[342],{"type":78,"value":225},{"type":67,"tag":143,"props":344,"children":345},{"style":156},[346],{"type":78,"value":347},"null",{"type":67,"tag":143,"props":349,"children":350},{"style":162},[351],{"type":78,"value":289},{"type":67,"tag":143,"props":353,"children":354},{"class":145,"line":193},[355],{"type":67,"tag":143,"props":356,"children":357},{"emptyLinePlaceholder":197},[358],{"type":78,"value":200},{"type":67,"tag":143,"props":360,"children":361},{"class":145,"line":203},[362,366,371,375,380,385,389],{"type":67,"tag":143,"props":363,"children":364},{"style":228},[365],{"type":78,"value":323},{"type":67,"tag":143,"props":367,"children":368},{"style":162},[369],{"type":78,"value":370}," fetchMe ",{"type":67,"tag":143,"props":372,"children":373},{"style":156},[374],{"type":78,"value":333},{"type":67,"tag":143,"props":376,"children":377},{"style":228},[378],{"type":78,"value":379}," async",{"type":67,"tag":143,"props":381,"children":382},{"style":156},[383],{"type":78,"value":384}," ()",{"type":67,"tag":143,"props":386,"children":387},{"style":228},[388],{"type":78,"value":252},{"type":67,"tag":143,"props":390,"children":391},{"style":156},[392],{"type":78,"value":257},{"type":67,"tag":143,"props":394,"children":395},{"class":145,"line":260},[396,401,405,410,415,419,424,428,433,438,442],{"type":67,"tag":143,"props":397,"children":398},{"style":162},[399],{"type":78,"value":400},"   user",{"type":67,"tag":143,"props":402,"children":403},{"style":156},[404],{"type":78,"value":110},{"type":67,"tag":143,"props":406,"children":407},{"style":162},[408],{"type":78,"value":409},"value",{"type":67,"tag":143,"props":411,"children":412},{"style":156},[413],{"type":78,"value":414}," =",{"type":67,"tag":143,"props":416,"children":417},{"style":150},[418],{"type":78,"value":271},{"type":67,"tag":143,"props":420,"children":421},{"style":217},[422],{"type":78,"value":423}," $fetch",{"type":67,"tag":143,"props":425,"children":426},{"style":278},[427],{"type":78,"value":225},{"type":67,"tag":143,"props":429,"children":430},{"style":156},[431],{"type":78,"value":432},"'",{"type":67,"tag":143,"props":434,"children":435},{"style":183},[436],{"type":78,"value":437},"/api/me",{"type":67,"tag":143,"props":439,"children":440},{"style":156},[441],{"type":78,"value":432},{"type":67,"tag":143,"props":443,"children":444},{"style":278},[445],{"type":78,"value":289},{"type":67,"tag":143,"props":447,"children":448},{"class":145,"line":292},[449],{"type":67,"tag":143,"props":450,"children":451},{"style":156},[452],{"type":78,"value":453},"}\n",{"type":67,"tag":74,"props":455,"children":456},{},[457,459,466],{"type":78,"value":458},"Be careful, if you want to call this route on SSR, please read this ",{"type":67,"tag":81,"props":460,"children":463},{"href":461,"rel":462},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[85],[464],{"type":78,"value":465},"section",{"type":78,"value":467},", you must send your browser cookies including your supabase token.",{"type":67,"tag":132,"props":469,"children":471},{"className":134,"code":470,"filename":311,"language":137,"meta":61,"style":61},"const user = ref(null)\n\nconst { data } = await useFetch('/api/me', {\n  headers: useRequestHeaders(['cookie'])\n})\n\nuser.value = data\n",[472],{"type":67,"tag":117,"props":473,"children":474},{"__ignoreMap":61},[475,506,513,571,612,623,631],{"type":67,"tag":143,"props":476,"children":477},{"class":145,"line":146},[478,482,486,490,494,498,502],{"type":67,"tag":143,"props":479,"children":480},{"style":228},[481],{"type":78,"value":323},{"type":67,"tag":143,"props":483,"children":484},{"style":162},[485],{"type":78,"value":328},{"type":67,"tag":143,"props":487,"children":488},{"style":156},[489],{"type":78,"value":333},{"type":67,"tag":143,"props":491,"children":492},{"style":217},[493],{"type":78,"value":338},{"type":67,"tag":143,"props":495,"children":496},{"style":162},[497],{"type":78,"value":225},{"type":67,"tag":143,"props":499,"children":500},{"style":156},[501],{"type":78,"value":347},{"type":67,"tag":143,"props":503,"children":504},{"style":162},[505],{"type":78,"value":289},{"type":67,"tag":143,"props":507,"children":508},{"class":145,"line":193},[509],{"type":67,"tag":143,"props":510,"children":511},{"emptyLinePlaceholder":197},[512],{"type":78,"value":200},{"type":67,"tag":143,"props":514,"children":515},{"class":145,"line":203},[516,520,524,529,533,537,541,546,550,554,558,562,567],{"type":67,"tag":143,"props":517,"children":518},{"style":228},[519],{"type":78,"value":323},{"type":67,"tag":143,"props":521,"children":522},{"style":156},[523],{"type":78,"value":159},{"type":67,"tag":143,"props":525,"children":526},{"style":162},[527],{"type":78,"value":528}," data ",{"type":67,"tag":143,"props":530,"children":531},{"style":156},[532],{"type":78,"value":298},{"type":67,"tag":143,"props":534,"children":535},{"style":156},[536],{"type":78,"value":414},{"type":67,"tag":143,"props":538,"children":539},{"style":150},[540],{"type":78,"value":271},{"type":67,"tag":143,"props":542,"children":543},{"style":217},[544],{"type":78,"value":545}," useFetch",{"type":67,"tag":143,"props":547,"children":548},{"style":162},[549],{"type":78,"value":225},{"type":67,"tag":143,"props":551,"children":552},{"style":156},[553],{"type":78,"value":432},{"type":67,"tag":143,"props":555,"children":556},{"style":183},[557],{"type":78,"value":437},{"type":67,"tag":143,"props":559,"children":560},{"style":156},[561],{"type":78,"value":432},{"type":67,"tag":143,"props":563,"children":564},{"style":156},[565],{"type":78,"value":566},",",{"type":67,"tag":143,"props":568,"children":569},{"style":156},[570],{"type":78,"value":257},{"type":67,"tag":143,"props":572,"children":573},{"class":145,"line":260},[574,579,584,589,594,598,603,607],{"type":67,"tag":143,"props":575,"children":576},{"style":278},[577],{"type":78,"value":578},"  headers",{"type":67,"tag":143,"props":580,"children":581},{"style":156},[582],{"type":78,"value":583},":",{"type":67,"tag":143,"props":585,"children":586},{"style":217},[587],{"type":78,"value":588}," useRequestHeaders",{"type":67,"tag":143,"props":590,"children":591},{"style":162},[592],{"type":78,"value":593},"([",{"type":67,"tag":143,"props":595,"children":596},{"style":156},[597],{"type":78,"value":432},{"type":67,"tag":143,"props":599,"children":600},{"style":183},[601],{"type":78,"value":602},"cookie",{"type":67,"tag":143,"props":604,"children":605},{"style":156},[606],{"type":78,"value":432},{"type":67,"tag":143,"props":608,"children":609},{"style":162},[610],{"type":78,"value":611},"])\n",{"type":67,"tag":143,"props":613,"children":614},{"class":145,"line":292},[615,619],{"type":67,"tag":143,"props":616,"children":617},{"style":156},[618],{"type":78,"value":298},{"type":67,"tag":143,"props":620,"children":621},{"style":162},[622],{"type":78,"value":289},{"type":67,"tag":143,"props":624,"children":626},{"class":145,"line":625},6,[627],{"type":67,"tag":143,"props":628,"children":629},{"emptyLinePlaceholder":197},[630],{"type":78,"value":200},{"type":67,"tag":143,"props":632,"children":634},{"class":145,"line":633},7,[635,640,644,649,653],{"type":67,"tag":143,"props":636,"children":637},{"style":162},[638],{"type":78,"value":639},"user",{"type":67,"tag":143,"props":641,"children":642},{"style":156},[643],{"type":78,"value":110},{"type":67,"tag":143,"props":645,"children":646},{"style":162},[647],{"type":78,"value":648},"value ",{"type":67,"tag":143,"props":650,"children":651},{"style":156},[652],{"type":78,"value":333},{"type":67,"tag":143,"props":654,"children":655},{"style":162},[656],{"type":78,"value":657}," data\n",{"type":67,"tag":659,"props":660,"children":661},"style",{},[662],{"type":78,"value":663},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":61,"searchDepth":193,"depth":193,"links":665},[],"markdown","content:4.usage:services:4.serverSupabaseUser.md","content","4.usage/services/4.serverSupabaseUser.md","4.usage/services/4.serverSupabaseUser","md",[673,675],{"_path":41,"title":40,"description":674},"Get your Supabase user's session from serverside with the serverSupabaseUser service",{"_path":48,"title":47,"description":676},"Demonstration of using Supabase with Nuxt.",1740739169075]