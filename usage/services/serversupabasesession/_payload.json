[{"data":1,"prerenderedAt":699},["ShallowReactive",2],{"navigation":3,"/usage/services/serversupabasesession":61,"/usage/services/serversupabasesession-surround":694},[4,8,12,49,53,57],{"title":5,"_path":6,"icon":7},"Get Started","/get-started","i-heroicons-rocket-launch",{"title":9,"_path":10,"icon":11},"Authentication","/authentication","i-heroicons-lock-closed",{"title":13,"_path":14,"children":15,"icon":48},"Usage","/usage",[16,32],{"title":17,"_path":18,"children":19},"Vue composables","/usage/composables",[20,23,26,29],{"title":21,"_path":22},"useSupabaseClient","/usage/composables/usesupabaseclient",{"title":24,"_path":25},"useSupabaseCookieRedirect","/usage/composables/usesupabasecookieredirect",{"title":27,"_path":28},"useSupabaseSession","/usage/composables/usesupabasesession",{"title":30,"_path":31},"useSupabaseUser","/usage/composables/usesupabaseuser",{"title":33,"_path":34,"children":35},"Server services","/usage/services",[36,39,42,45],{"title":37,"_path":38},"serverSupabaseClient","/usage/services/serversupabaseclient",{"title":40,"_path":41},"serverSupabaseServiceRole","/usage/services/serversupabaseservicerole",{"title":43,"_path":44},"serverSupabaseSession","/usage/services/serversupabasesession",{"title":46,"_path":47},"serverSupabaseUser","/usage/services/serversupabaseuser","heroicons:book-open",{"title":50,"_path":51,"icon":52},"Demo","/demo","i-heroicons-computer-desktop-20-solid",{"title":54,"_path":55,"icon":56},"Changelog","/changelog","i-heroicons-bookmark",{"title":58,"_path":59,"icon":60},"Roadmap","/roadmap","i-heroicons-map",{"_path":44,"_dir":62,"_draft":63,"_partial":63,"_locale":64,"title":43,"description":65,"body":66,"_type":688,"_id":689,"_source":690,"_file":691,"_stem":692,"_extension":693},"services",false,"","Get your Supabase user's session from serverside with the serverSupabaseUser service",{"type":67,"children":68,"toc":686},"root",[69,94,114,134,153,325,330,476,490,680],{"type":70,"tag":71,"props":72,"children":75},"element","callout",{"color":73,"icon":74},"amber","i-heroicons-exclamation-triangle-20-solid",[76],{"type":70,"tag":77,"props":78,"children":79},"p",{},[80,83,92],{"type":81,"value":82},"text","This section assumes you're familiar with ",{"type":70,"tag":84,"props":85,"children":89},"a",{"href":86,"rel":87},"https://v3.nuxtjs.org/guide/concepts/server-engine",[88],"nofollow",[90],{"type":81,"value":91},"Nitro",{"type":81,"value":93},", the server engine powered by Nuxt.",{"type":70,"tag":77,"props":95,"children":96},{},[97,99,103,105,112],{"type":81,"value":98},"This function is similar to the ",{"type":70,"tag":84,"props":100,"children":101},{"href":28},[102],{"type":81,"value":27},{"type":81,"value":104}," composable but is used in ",{"type":70,"tag":84,"props":106,"children":109},{"href":107,"rel":108},"https://nuxt.com/docs/guide/directory-structure/server#server-routes",[88],[110],{"type":81,"value":111},"server routes",{"type":81,"value":113},".",{"type":70,"tag":71,"props":115,"children":116},{"color":73,"icon":74},[117],{"type":70,"tag":77,"props":118,"children":119},{},[120,122,128,130],{"type":81,"value":121},"Be advised that ",{"type":70,"tag":123,"props":124,"children":126},"code",{"className":125},[],[127],{"type":81,"value":43},{"type":81,"value":129}," is considered unsafe, since the session comes from the client and users can tamper with it. For checking if the user is logged in, always use  ",{"type":70,"tag":84,"props":131,"children":132},{"href":47},[133],{"type":81,"value":46},{"type":70,"tag":77,"props":135,"children":136},{},[137,139,144,146,152],{"type":81,"value":138},"Define your server route and import the ",{"type":70,"tag":123,"props":140,"children":142},{"className":141},[],[143],{"type":81,"value":43},{"type":81,"value":145}," from ",{"type":70,"tag":123,"props":147,"children":149},{"className":148},[],[150],{"type":81,"value":151},"#supabase/server",{"type":81,"value":113},{"type":70,"tag":154,"props":155,"children":160},"pre",{"className":156,"code":157,"filename":158,"language":159,"meta":64,"style":64},"language-ts shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","import { serverSupabaseSession } from '#supabase/server'\n\nexport default defineEventHandler(async (event) => {\n  return await serverSupabaseSession(event)\n})\n","server/api/session.ts","ts",[161],{"type":70,"tag":123,"props":162,"children":163},{"__ignoreMap":64},[164,213,223,280,312],{"type":70,"tag":165,"props":166,"children":169},"span",{"class":167,"line":168},"line",1,[170,176,182,188,193,198,203,208],{"type":70,"tag":165,"props":171,"children":173},{"style":172},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[174],{"type":81,"value":175},"import",{"type":70,"tag":165,"props":177,"children":179},{"style":178},"--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF",[180],{"type":81,"value":181}," {",{"type":70,"tag":165,"props":183,"children":185},{"style":184},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8",[186],{"type":81,"value":187}," serverSupabaseSession",{"type":70,"tag":165,"props":189,"children":190},{"style":178},[191],{"type":81,"value":192}," }",{"type":70,"tag":165,"props":194,"children":195},{"style":172},[196],{"type":81,"value":197}," from",{"type":70,"tag":165,"props":199,"children":200},{"style":178},[201],{"type":81,"value":202}," '",{"type":70,"tag":165,"props":204,"children":206},{"style":205},"--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D",[207],{"type":81,"value":151},{"type":70,"tag":165,"props":209,"children":210},{"style":178},[211],{"type":81,"value":212},"'\n",{"type":70,"tag":165,"props":214,"children":216},{"class":167,"line":215},2,[217],{"type":70,"tag":165,"props":218,"children":220},{"emptyLinePlaceholder":219},true,[221],{"type":81,"value":222},"\n",{"type":70,"tag":165,"props":224,"children":226},{"class":167,"line":225},3,[227,232,237,243,248,254,259,265,270,275],{"type":70,"tag":165,"props":228,"children":229},{"style":172},[230],{"type":81,"value":231},"export",{"type":70,"tag":165,"props":233,"children":234},{"style":172},[235],{"type":81,"value":236}," default",{"type":70,"tag":165,"props":238,"children":240},{"style":239},"--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF",[241],{"type":81,"value":242}," defineEventHandler",{"type":70,"tag":165,"props":244,"children":245},{"style":184},[246],{"type":81,"value":247},"(",{"type":70,"tag":165,"props":249,"children":251},{"style":250},"--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA",[252],{"type":81,"value":253},"async",{"type":70,"tag":165,"props":255,"children":256},{"style":178},[257],{"type":81,"value":258}," (",{"type":70,"tag":165,"props":260,"children":262},{"style":261},"--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[263],{"type":81,"value":264},"event",{"type":70,"tag":165,"props":266,"children":267},{"style":178},[268],{"type":81,"value":269},")",{"type":70,"tag":165,"props":271,"children":272},{"style":250},[273],{"type":81,"value":274}," =>",{"type":70,"tag":165,"props":276,"children":277},{"style":178},[278],{"type":81,"value":279}," {\n",{"type":70,"tag":165,"props":281,"children":283},{"class":167,"line":282},4,[284,289,294,298,303,307],{"type":70,"tag":165,"props":285,"children":286},{"style":172},[287],{"type":81,"value":288},"  return",{"type":70,"tag":165,"props":290,"children":291},{"style":172},[292],{"type":81,"value":293}," await",{"type":70,"tag":165,"props":295,"children":296},{"style":239},[297],{"type":81,"value":187},{"type":70,"tag":165,"props":299,"children":301},{"style":300},"--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178",[302],{"type":81,"value":247},{"type":70,"tag":165,"props":304,"children":305},{"style":184},[306],{"type":81,"value":264},{"type":70,"tag":165,"props":308,"children":309},{"style":300},[310],{"type":81,"value":311},")\n",{"type":70,"tag":165,"props":313,"children":315},{"class":167,"line":314},5,[316,321],{"type":70,"tag":165,"props":317,"children":318},{"style":178},[319],{"type":81,"value":320},"}",{"type":70,"tag":165,"props":322,"children":323},{"style":184},[324],{"type":81,"value":311},{"type":70,"tag":77,"props":326,"children":327},{},[328],{"type":81,"value":329},"Then call your api route from any vue file:",{"type":70,"tag":154,"props":331,"children":334},{"className":156,"code":332,"filename":333,"language":159,"meta":64,"style":64},"const session = ref(null)\n\nconst fetchSession = async () => {\n   session.value = await $fetch('/api/session')\n}\n","pages/index.vue",[335],{"type":70,"tag":123,"props":336,"children":337},{"__ignoreMap":64},[338,374,381,415,468],{"type":70,"tag":165,"props":339,"children":340},{"class":167,"line":168},[341,346,351,356,361,365,370],{"type":70,"tag":165,"props":342,"children":343},{"style":250},[344],{"type":81,"value":345},"const",{"type":70,"tag":165,"props":347,"children":348},{"style":184},[349],{"type":81,"value":350}," session ",{"type":70,"tag":165,"props":352,"children":353},{"style":178},[354],{"type":81,"value":355},"=",{"type":70,"tag":165,"props":357,"children":358},{"style":239},[359],{"type":81,"value":360}," ref",{"type":70,"tag":165,"props":362,"children":363},{"style":184},[364],{"type":81,"value":247},{"type":70,"tag":165,"props":366,"children":367},{"style":178},[368],{"type":81,"value":369},"null",{"type":70,"tag":165,"props":371,"children":372},{"style":184},[373],{"type":81,"value":311},{"type":70,"tag":165,"props":375,"children":376},{"class":167,"line":215},[377],{"type":70,"tag":165,"props":378,"children":379},{"emptyLinePlaceholder":219},[380],{"type":81,"value":222},{"type":70,"tag":165,"props":382,"children":383},{"class":167,"line":225},[384,388,393,397,402,407,411],{"type":70,"tag":165,"props":385,"children":386},{"style":250},[387],{"type":81,"value":345},{"type":70,"tag":165,"props":389,"children":390},{"style":184},[391],{"type":81,"value":392}," fetchSession ",{"type":70,"tag":165,"props":394,"children":395},{"style":178},[396],{"type":81,"value":355},{"type":70,"tag":165,"props":398,"children":399},{"style":250},[400],{"type":81,"value":401}," async",{"type":70,"tag":165,"props":403,"children":404},{"style":178},[405],{"type":81,"value":406}," ()",{"type":70,"tag":165,"props":408,"children":409},{"style":250},[410],{"type":81,"value":274},{"type":70,"tag":165,"props":412,"children":413},{"style":178},[414],{"type":81,"value":279},{"type":70,"tag":165,"props":416,"children":417},{"class":167,"line":282},[418,423,427,432,437,441,446,450,455,460,464],{"type":70,"tag":165,"props":419,"children":420},{"style":184},[421],{"type":81,"value":422},"   session",{"type":70,"tag":165,"props":424,"children":425},{"style":178},[426],{"type":81,"value":113},{"type":70,"tag":165,"props":428,"children":429},{"style":184},[430],{"type":81,"value":431},"value",{"type":70,"tag":165,"props":433,"children":434},{"style":178},[435],{"type":81,"value":436}," =",{"type":70,"tag":165,"props":438,"children":439},{"style":172},[440],{"type":81,"value":293},{"type":70,"tag":165,"props":442,"children":443},{"style":239},[444],{"type":81,"value":445}," $fetch",{"type":70,"tag":165,"props":447,"children":448},{"style":300},[449],{"type":81,"value":247},{"type":70,"tag":165,"props":451,"children":452},{"style":178},[453],{"type":81,"value":454},"'",{"type":70,"tag":165,"props":456,"children":457},{"style":205},[458],{"type":81,"value":459},"/api/session",{"type":70,"tag":165,"props":461,"children":462},{"style":178},[463],{"type":81,"value":454},{"type":70,"tag":165,"props":465,"children":466},{"style":300},[467],{"type":81,"value":311},{"type":70,"tag":165,"props":469,"children":470},{"class":167,"line":314},[471],{"type":70,"tag":165,"props":472,"children":473},{"style":178},[474],{"type":81,"value":475},"}\n",{"type":70,"tag":77,"props":477,"children":478},{},[479,481,488],{"type":81,"value":480},"Be careful, if you want to call this route on SSR, please read this ",{"type":70,"tag":84,"props":482,"children":485},{"href":483,"rel":484},"https://nuxt.com/docs/getting-started/data-fetching#isomorphic-fetch-and-fetch",[88],[486],{"type":81,"value":487},"section",{"type":81,"value":489},", you must send your browser cookies including your supabase token.",{"type":70,"tag":154,"props":491,"children":493},{"className":156,"code":492,"filename":333,"language":159,"meta":64,"style":64},"const session = ref(null)\n\nconst { data } = await useFetch('/api/session', {\n  headers: useRequestHeaders(['cookie'])\n})\n\nsession.value = data\n",[494],{"type":70,"tag":123,"props":495,"children":496},{"__ignoreMap":64},[497,528,535,593,634,645,653],{"type":70,"tag":165,"props":498,"children":499},{"class":167,"line":168},[500,504,508,512,516,520,524],{"type":70,"tag":165,"props":501,"children":502},{"style":250},[503],{"type":81,"value":345},{"type":70,"tag":165,"props":505,"children":506},{"style":184},[507],{"type":81,"value":350},{"type":70,"tag":165,"props":509,"children":510},{"style":178},[511],{"type":81,"value":355},{"type":70,"tag":165,"props":513,"children":514},{"style":239},[515],{"type":81,"value":360},{"type":70,"tag":165,"props":517,"children":518},{"style":184},[519],{"type":81,"value":247},{"type":70,"tag":165,"props":521,"children":522},{"style":178},[523],{"type":81,"value":369},{"type":70,"tag":165,"props":525,"children":526},{"style":184},[527],{"type":81,"value":311},{"type":70,"tag":165,"props":529,"children":530},{"class":167,"line":215},[531],{"type":70,"tag":165,"props":532,"children":533},{"emptyLinePlaceholder":219},[534],{"type":81,"value":222},{"type":70,"tag":165,"props":536,"children":537},{"class":167,"line":225},[538,542,546,551,555,559,563,568,572,576,580,584,589],{"type":70,"tag":165,"props":539,"children":540},{"style":250},[541],{"type":81,"value":345},{"type":70,"tag":165,"props":543,"children":544},{"style":178},[545],{"type":81,"value":181},{"type":70,"tag":165,"props":547,"children":548},{"style":184},[549],{"type":81,"value":550}," data ",{"type":70,"tag":165,"props":552,"children":553},{"style":178},[554],{"type":81,"value":320},{"type":70,"tag":165,"props":556,"children":557},{"style":178},[558],{"type":81,"value":436},{"type":70,"tag":165,"props":560,"children":561},{"style":172},[562],{"type":81,"value":293},{"type":70,"tag":165,"props":564,"children":565},{"style":239},[566],{"type":81,"value":567}," useFetch",{"type":70,"tag":165,"props":569,"children":570},{"style":184},[571],{"type":81,"value":247},{"type":70,"tag":165,"props":573,"children":574},{"style":178},[575],{"type":81,"value":454},{"type":70,"tag":165,"props":577,"children":578},{"style":205},[579],{"type":81,"value":459},{"type":70,"tag":165,"props":581,"children":582},{"style":178},[583],{"type":81,"value":454},{"type":70,"tag":165,"props":585,"children":586},{"style":178},[587],{"type":81,"value":588},",",{"type":70,"tag":165,"props":590,"children":591},{"style":178},[592],{"type":81,"value":279},{"type":70,"tag":165,"props":594,"children":595},{"class":167,"line":282},[596,601,606,611,616,620,625,629],{"type":70,"tag":165,"props":597,"children":598},{"style":300},[599],{"type":81,"value":600},"  headers",{"type":70,"tag":165,"props":602,"children":603},{"style":178},[604],{"type":81,"value":605},":",{"type":70,"tag":165,"props":607,"children":608},{"style":239},[609],{"type":81,"value":610}," useRequestHeaders",{"type":70,"tag":165,"props":612,"children":613},{"style":184},[614],{"type":81,"value":615},"([",{"type":70,"tag":165,"props":617,"children":618},{"style":178},[619],{"type":81,"value":454},{"type":70,"tag":165,"props":621,"children":622},{"style":205},[623],{"type":81,"value":624},"cookie",{"type":70,"tag":165,"props":626,"children":627},{"style":178},[628],{"type":81,"value":454},{"type":70,"tag":165,"props":630,"children":631},{"style":184},[632],{"type":81,"value":633},"])\n",{"type":70,"tag":165,"props":635,"children":636},{"class":167,"line":314},[637,641],{"type":70,"tag":165,"props":638,"children":639},{"style":178},[640],{"type":81,"value":320},{"type":70,"tag":165,"props":642,"children":643},{"style":184},[644],{"type":81,"value":311},{"type":70,"tag":165,"props":646,"children":648},{"class":167,"line":647},6,[649],{"type":70,"tag":165,"props":650,"children":651},{"emptyLinePlaceholder":219},[652],{"type":81,"value":222},{"type":70,"tag":165,"props":654,"children":656},{"class":167,"line":655},7,[657,662,666,671,675],{"type":70,"tag":165,"props":658,"children":659},{"style":184},[660],{"type":81,"value":661},"session",{"type":70,"tag":165,"props":663,"children":664},{"style":178},[665],{"type":81,"value":113},{"type":70,"tag":165,"props":667,"children":668},{"style":184},[669],{"type":81,"value":670},"value ",{"type":70,"tag":165,"props":672,"children":673},{"style":178},[674],{"type":81,"value":355},{"type":70,"tag":165,"props":676,"children":677},{"style":184},[678],{"type":81,"value":679}," data\n",{"type":70,"tag":681,"props":682,"children":683},"style",{},[684],{"type":81,"value":685},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":64,"searchDepth":215,"depth":215,"links":687},[],"markdown","content:4.usage:services:3.serverSupabaseSession.md","content","4.usage/services/3.serverSupabaseSession.md","4.usage/services/3.serverSupabaseSession","md",[695,697],{"_path":41,"title":40,"description":696},"Make requests with super admin rights to the Supabase API with the serverSupabaseServiceRole service",{"_path":47,"title":46,"description":698},"Get your Supabase user from serverside with the serverSupabaseUser service",1741083605815]