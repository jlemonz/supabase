import{D as E,E as K,G as Dt,H as X,I as Ye,J as Nt,r as B,b as ot,K as Fe,L as be,M as it,d as se,N as fe,O as Vt,P as z,C as oe,Q as jt,R as at,S as Kt,U as Ee,o as ye,V as xe,W as Ut,X as Ht,Y as Wt,Z as $e,$ as je,F as Ce,a0 as Ke,a1 as ke,a2 as qt,a3 as lt,a4 as Gt,a5 as Yt,a6 as ee,a7 as rt,a8 as Je,a9 as Jt,aa as J,l as Ue,ab as Ae,ac as ut,ad as ct,ae as He,af as We,ag as te,c as L,e as H,n as F,t as ie,g as G,f as Y,ah as Se,ai as j,w as W,aj as ae,ak as ce,al as Qt,k as Xt,am as dt,an as Re,ao as ht,ap as qe,aq as Ie,ar as ft,as as pt,at as Zt,au as en,h as ge,av as tn,aw as vt,ax as mt,ay as gt,az as nn,aA as sn,aB as on,aC as an,aD as bt,aE as ln,z as rn,a as un,aF as cn,aG as dn,aH as hn,aI as fn,aJ as pn,aK as vn}from"./rgY-fU10.js";const mn={wrapper:"flex flex-col flex-1 min-h-0 divide-y divide-gray-100 dark:divide-gray-800",container:"relative flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-800 scroll-py-2",input:{wrapper:"relative flex items-center",base:"w-full placeholder-gray-400 dark:placeholder-gray-500 bg-transparent border-0 text-gray-900 dark:text-white focus:ring-0 focus:outline-none",padding:"px-4",height:"h-12",size:"sm:text-sm",icon:{base:"pointer-events-none absolute start-4 text-gray-400 dark:text-gray-500",loading:"animate-spin",size:"h-5 w-5",padding:"ps-11"},closeButton:{base:"absolute end-4",padding:"pe-10"}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",queryLabel:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},group:{wrapper:"p-2",label:"px-2.5 my-2 text-xs font-semibold text-gray-900 dark:text-white",container:"text-sm text-gray-700 dark:text-gray-200",command:{base:"flex justify-between select-none items-center rounded-md px-2.5 py-1.5 gap-2 relative",active:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactive:"",label:"flex items-center gap-1.5 min-w-0",prefix:"text-gray-400 dark:text-gray-500",suffix:"text-gray-400 dark:text-gray-500",container:"flex items-center gap-1.5 min-w-0",icon:{base:"flex-shrink-0 w-5 h-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"},disabled:"opacity-50",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5"},active:"flex-shrink-0 text-gray-500 dark:text-gray-400",inactive:"flex-shrink-0 text-gray-500 dark:text-gray-400"},default:{icon:"i-heroicons-magnifying-glass-20-solid",loadingIcon:"i-heroicons-arrow-path-20-solid",emptyState:{icon:"i-heroicons-magnifying-glass-20-solid",label:"We couldn't find any items.",queryLabel:"We couldn't find any items with that term. Please try again."},closeButton:null,selectedIcon:"i-heroicons-check-20-solid"}},gn={wrapper:"relative z-50",inner:"fixed inset-0 overflow-y-auto",container:"flex min-h-full items-end sm:items-center justify-center text-center",padding:"p-4 sm:p-0",margin:"sm:my-8",base:"relative text-left rtl:text-right flex flex-col",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},background:"bg-white dark:bg-gray-900",ring:"",rounded:"rounded-lg",shadow:"shadow-xl",width:"w-full sm:max-w-lg",height:"",fullscreen:"w-screen h-screen",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}};function de(e,n,t){let o=t.initialDeps??[],s;return()=>{var i,l,a,c;let u;t.key&&((i=t.debug)!=null&&i.call(t))&&(u=Date.now());const r=e();if(!(r.length!==o.length||r.some((b,S)=>o[S]!==b)))return s;o=r;let h;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(h=Date.now()),s=n(...r),t.key&&((a=t.debug)!=null&&a.call(t))){const b=Math.round((Date.now()-u)*100)/100,S=Math.round((Date.now()-h)*100)/100,R=S/16,P=($,I)=>{for($=String($);$.length<I;)$=" "+$;return $};console.info(`%c⏱ ${P(S,5)} /${P(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(c=t==null?void 0:t.onChange)==null||c.call(t,s),s}}function _e(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const bn=(e,n)=>Math.abs(e-n)<1,yn=e=>e,xn=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),o=[];for(let s=n;s<=t;s++)o.push(s);return o},Sn=(e,n)=>{const t=e.scrollElement;if(!t)return;const o=i=>{const{width:l,height:a}=i;n({width:Math.round(l),height:Math.round(a)})};if(o(t.getBoundingClientRect()),typeof ResizeObserver>"u")return()=>{};const s=new ResizeObserver(i=>{const l=i[0];if(l!=null&&l.borderBoxSize){const a=l.borderBoxSize[0];if(a){o({width:a.inlineSize,height:a.blockSize});return}}o(t.getBoundingClientRect())});return s.observe(t,{box:"border-box"}),()=>{s.unobserve(t)}},In=(e,n)=>{const t=e.scrollElement;if(!t)return;const o=()=>{n(t[e.options.horizontal?"scrollLeft":"scrollTop"])};return o(),t.addEventListener("scroll",o,{passive:!0}),()=>{t.removeEventListener("scroll",o)}},On=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const o=n.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},wn=(e,{adjustments:n=0,behavior:t},o)=>{var s,i;const l=e+n;(i=(s=o.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[o.options.horizontal?"left":"top"]:l,behavior:t})};class Mn{constructor(n){this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(typeof ResizeObserver<"u"?t=new ResizeObserver(s=>{s.forEach(i=>{this._measureElement(i.target,i)})}):null);return{disconnect:()=>{var s;return(s=o())==null?void 0:s.disconnect()},observe:s=>{var i;return(i=o())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=o())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,s])=>{typeof s>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:yn,rangeExtractor:xn,onChange:()=>{},measureElement:On,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,...t}},this.notify=t=>{var o,s;(s=(o=this.options).onChange)==null||s.call(o,this,t)},this.maybeNotify=de(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{const t=this.options.getScrollElement();this.scrollElement!==t&&(this.cleanup(),this.scrollElement=t,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,o=>{this.scrollAdjustments=0,this.scrollOffset!==o&&(this.isScrollingTimeoutId!==null&&(clearTimeout(this.isScrollingTimeoutId),this.isScrollingTimeoutId=null),this.isScrolling=!0,this.scrollDirection=this.scrollOffset<o?"forward":"backward",this.scrollOffset=o,this.maybeNotify(),this.isScrollingTimeoutId=setTimeout(()=>{this.isScrollingTimeoutId=null,this.isScrolling=!1,this.scrollDirection=null,this.maybeNotify()},this.options.scrollingDelay))})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.memoOptions=de(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(t,o,s,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:s,getItemKey:i}),{key:!1}),this.getFurthestMeasurement=(t,o)=>{const s=new Map,i=new Map;for(let l=o-1;l>=0;l--){const a=t[l];if(s.has(a.lane))continue;const c=i.get(a.lane);if(c==null||a.end>c.end?i.set(a.lane,a):a.end<c.end&&s.set(a.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,a)=>l.end===a.end?l.index-a.index:l.end-a.end)[0]:void 0},this.getMeasurements=de(()=>[this.memoOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:s,getItemKey:i},l)=>{const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,a);for(let u=a;u<t;u++){const r=i(u),d=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),h=d?d.end:o+s,b=l.get(r),S=typeof b=="number"?b:this.options.estimateSize(u),R=h+S,P=d?d.lane:u%this.options.lanes;c[u]={index:u,start:h,size:S,end:R,key:r,lane:P}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=de(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(t,o,s)=>this.range=t.length>0&&o>0?En({measurements:t,outerSize:o,scrollOffset:s}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=de(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,o,s,i)=>o===null?[]:t({...o,overscan:s,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,s=t.getAttribute(o);return s?parseInt(s,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const s=this.measurementsCache[this.indexFromElement(t)];if(!s||!t.isConnected){this.measureElementCache.forEach((a,c)=>{a===t&&(this.observer.unobserve(t),this.measureElementCache.delete(c))});return}const i=this.measureElementCache.get(s.key);i!==t&&(i&&this.observer.unobserve(i),this.observer.observe(t),this.measureElementCache.set(s.key,t));const l=this.options.measureElement(t,o,this);this.resizeItem(s,l)},this.resizeItem=(t,o)=>{const s=this.itemSizeCache.get(t.key)??t.size,i=o-s;i!==0&&(t.start<this.scrollOffset+this.scrollAdjustments&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,o)),this.notify(!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=de(()=>[this.getIndexes(),this.getMeasurements()],(t,o)=>{const s=[];for(let i=0,l=t.length;i<l;i++){const a=t[i],c=o[a];s.push(c)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();return _e(o[yt(0,o.length-1,s=>_e(o[s]).start,t)])},this.getOffsetForAlignment=(t,o)=>{const s=this.getSize();o==="auto"&&(t<=this.scrollOffset?o="start":t>=this.scrollOffset+s?o="end":o="start"),o==="start"?t=t:o==="end"?t=t-s:o==="center"&&(t=t-s/2);const i=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-this.getSize();return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=_e(this.getMeasurements()[t]);if(o==="auto")if(s.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)o="end";else if(s.start<=this.scrollOffset+this.options.scrollPaddingStart)o="start";else return[this.scrollOffset,o];const i=o==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,o),o]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&(clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:o="start",behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:o="auto",behavior:s}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[i,l]=this.getOffsetForIndex(t,o);this._scrollToOffset(i,{adjustments:void 0,behavior:s}),s!=="smooth"&&this.isDynamicMode()&&(this.scrollToIndexTimeoutId=setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(t))){const[c]=this.getOffsetForIndex(t,l);bn(c,this.scrollOffset)||this.scrollToIndex(t,{align:l,behavior:s})}else this.scrollToIndex(t,{align:l,behavior:s})}))},this.scrollBy=(t,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let s;return o.length===0?s=this.options.paddingStart:s=this.options.lanes===1?((t=o[o.length-1])==null?void 0:t.end)??0:Math.max(...o.slice(-this.options.lanes).map(i=>i.end)),s-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:o,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(t=>{this.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()}}const yt=(e,n,t,o)=>{for(;e<=n;){const s=(e+n)/2|0,i=t(s);if(i<o)e=s+1;else if(i>o)n=s-1;else return s}return e>0?e-1:0};function En({measurements:e,outerSize:n,scrollOffset:t}){const o=e.length-1,i=yt(0,o,a=>e[a].start,t);let l=i;for(;l<o&&e[l].end<t+n;)l++;return{startIndex:i,endIndex:l}}function Cn(e){const n=new Mn(K(e)),t=Dt(n),o=n._didMount();return X(()=>K(e).getScrollElement(),s=>{s&&n._willUpdate()},{immediate:!0}),X(()=>K(e),s=>{n.setOptions({...s,onChange:(i,l)=>{var a;Ye(t),(a=s.onChange)==null||a.call(s,i,l)}}),n._willUpdate(),Ye(t)},{immediate:!0}),Nt(o),t}function kn(e){return Cn(E(()=>({observeElementRect:Sn,observeElementOffset:In,scrollToFn:wn,...K(e)})))}function Rn(e,n,t){let o=B(t==null?void 0:t.value),s=E(()=>e.value!==void 0);return[E(()=>s.value?e.value:o.value),function(i){return s.value||(o.value=i),n==null?void 0:n(i)}]}function Tn(){let e=Fe();return ot(()=>e.dispose()),e}function $n(){let e=Tn();return n=>{e.dispose(),e.nextFrame(n)}}function Qe(e){return[e.screenX,e.screenY]}function An(){let e=B([-1,-1]);return{wasMoved(n){let t=Qe(n);return e.value[0]===t[0]&&e.value[1]===t[1]?!1:(e.value=t,!0)},update(n){e.value=Qe(n)}}}function _n({container:e,accept:n,walk:t,enabled:o}){be(()=>{let s=e.value;if(!s||o!==void 0&&!o.value)return;let i=it(e);if(!i)return;let l=Object.assign(c=>n(c),{acceptNode:n}),a=i.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,l,!1);for(;a.nextNode();)t(a.currentNode)})}var xt=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(xt||{});function Pn(e){throw new Error("Unexpected object: "+e)}var V=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(V||{});function Xe(e,n){let t=n.resolveItems();if(t.length<=0)return null;let o=n.resolveActiveIndex(),s=o??-1;switch(e.focus){case 0:{for(let i=0;i<t.length;++i)if(!n.resolveDisabled(t[i],i,t))return i;return o}case 1:{s===-1&&(s=t.length);for(let i=s-1;i>=0;--i)if(!n.resolveDisabled(t[i],i,t))return i;return o}case 2:{for(let i=s+1;i<t.length;++i)if(!n.resolveDisabled(t[i],i,t))return i;return o}case 3:{for(let i=t.length-1;i>=0;--i)if(!n.resolveDisabled(t[i],i,t))return i;return o}case 4:{for(let i=0;i<t.length;++i)if(n.resolveId(t[i],i,t)===e.id)return i;return o}case 5:return null;default:Pn(e)}}function St(e={},n=null,t=[]){for(let[o,s]of Object.entries(e))Ot(t,It(n,o),s);return t}function It(e,n){return e?e+"["+n+"]":n}function Ot(e,n,t){if(Array.isArray(t))for(let[o,s]of t.entries())Ot(e,It(n,o.toString()),s);else t instanceof Date?e.push([n,t.toISOString()]):typeof t=="boolean"?e.push([n,t?"1":"0"]):typeof t=="string"?e.push([n,t]):typeof t=="number"?e.push([n,`${t}`]):t==null?e.push([n,""]):St(t,n,e)}var Fn={};function Ln(e,n){return e===n}var Bn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Bn||{}),zn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(zn||{}),Dn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Dn||{});let wt=Symbol("ComboboxContext");function Oe(e){let n=lt(wt,null);if(n===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Oe),t}return n}let Mt=Symbol("VirtualContext"),Nn=se({name:"VirtualProvider",setup(e,{slots:n}){let t=Oe("VirtualProvider"),o=E(()=>{let a=z(t.optionsRef);if(!a)return{start:0,end:0};let c=window.getComputedStyle(a);return{start:parseFloat(c.paddingBlockStart||c.paddingTop),end:parseFloat(c.paddingBlockEnd||c.paddingBottom)}}),s=kn(E(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return z(t.optionsRef)},overscan:12}))),i=E(()=>{var a;return(a=t.virtual.value)==null?void 0:a.options}),l=B(0);return X([i],()=>{l.value+=1}),at(Mt,t.virtual.value?s:null),()=>[xe("div",{style:{position:"relative",width:"100%",height:`${s.value.getTotalSize()}px`},ref:a=>{if(a){if(typeof process<"u"&&Fn.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&s.value.scrollToIndex(t.activeOptionIndex.value)}}},s.value.getVirtualItems().map(a=>Gt(n.default({option:t.virtual.value.options[a.index],open:t.comboboxState.value===0})[0],{key:`${l.value}-${a.index}`,"data-index":a.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":a.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${a.start}px)`,overflowAnchor:"none"}})))]}}),Vn=se({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:n,attrs:t,emit:o}){let s=B(1),i=B(null),l=B(null),a=B(null),c=B(null),u=B({static:!1,hold:!1}),r=B([]),d=B(null),h=B(2),b=B(!1);function S(p=g=>g){let g=d.value!==null?r.value[d.value]:null,O=p(r.value.slice()),v=O.length>0&&O[0].dataRef.order.value!==null?O.sort((w,M)=>w.dataRef.order.value-M.dataRef.order.value):Yt(O,w=>z(w.dataRef.domRef)),m=g?v.indexOf(g):null;return m===-1&&(m=null),{options:v,activeOptionIndex:m}}let R=E(()=>e.multiple?1:0),P=E(()=>e.nullable),[$,I]=Rn(E(()=>e.modelValue),p=>o("update:modelValue",p),E(()=>e.defaultValue)),T=E(()=>$.value===void 0?fe(R.value,{1:[],0:void 0}):$.value),D=null,x=null;function _(p){return fe(R.value,{0(){return I==null?void 0:I(p)},1:()=>{let g=oe(f.value.value).slice(),O=oe(p),v=g.findIndex(m=>f.compare(O,oe(m)));return v===-1?g.push(O):g.splice(v,1),I==null?void 0:I(g)}})}let y=E(()=>{});X([y],([p],[g])=>{if(f.virtual.value&&p&&g&&d.value!==null){let O=p.indexOf(g[d.value]);O!==-1?d.value=O:d.value=null}});let f={comboboxState:s,value:T,mode:R,compare(p,g){if(typeof e.by=="string"){let O=e.by;return(p==null?void 0:p[O])===(g==null?void 0:g[O])}return e.by===null?Ln(p,g):e.by(p,g)},calculateIndex(p){return f.virtual.value?e.by===null?f.virtual.value.options.indexOf(p):f.virtual.value.options.findIndex(g=>f.compare(g,p)):r.value.findIndex(g=>f.compare(g.dataRef.value,p))},defaultValue:E(()=>e.defaultValue),nullable:P,immediate:E(()=>!1),virtual:E(()=>null),inputRef:l,labelRef:i,buttonRef:a,optionsRef:c,disabled:E(()=>e.disabled),options:r,change(p){I(p)},activeOptionIndex:E(()=>{if(b.value&&d.value===null&&(f.virtual.value?f.virtual.value.options.length>0:r.value.length>0)){if(f.virtual.value){let g=f.virtual.value.options.findIndex(O=>{var v;return!((v=f.virtual.value)!=null&&v.disabled(O))});if(g!==-1)return g}let p=r.value.findIndex(g=>!g.dataRef.disabled);if(p!==-1)return p}return d.value}),activationTrigger:h,optionsPropsRef:u,closeCombobox(){b.value=!1,!e.disabled&&s.value!==1&&(s.value=1,d.value=null)},openCombobox(){if(b.value=!0,!e.disabled&&s.value!==0){if(f.value.value){let p=f.calculateIndex(f.value.value);p!==-1&&(d.value=p)}s.value=0}},setActivationTrigger(p){h.value=p},goToOption(p,g,O){b.value=!1,D!==null&&cancelAnimationFrame(D),D=requestAnimationFrame(()=>{if(e.disabled||c.value&&!u.value.static&&s.value===1)return;if(f.virtual.value){d.value=p===V.Specific?g:Xe({focus:p},{resolveItems:()=>f.virtual.value.options,resolveActiveIndex:()=>{var w,M;return(M=(w=f.activeOptionIndex.value)!=null?w:f.virtual.value.options.findIndex(A=>{var N;return!((N=f.virtual.value)!=null&&N.disabled(A))}))!=null?M:null},resolveDisabled:w=>f.virtual.value.disabled(w),resolveId(){throw new Error("Function not implemented.")}}),h.value=O??2;return}let v=S();if(v.activeOptionIndex===null){let w=v.options.findIndex(M=>!M.dataRef.disabled);w!==-1&&(v.activeOptionIndex=w)}let m=p===V.Specific?g:Xe({focus:p},{resolveItems:()=>v.options,resolveActiveIndex:()=>v.activeOptionIndex,resolveId:w=>w.id,resolveDisabled:w=>w.dataRef.disabled});d.value=m,h.value=O??2,r.value=v.options})},selectOption(p){let g=r.value.find(v=>v.id===p);if(!g)return;let{dataRef:O}=g;_(O.value)},selectActiveOption(){if(f.activeOptionIndex.value!==null){if(f.virtual.value)_(f.virtual.value.options[f.activeOptionIndex.value]);else{let{dataRef:p}=r.value[f.activeOptionIndex.value];_(p.value)}f.goToOption(V.Specific,f.activeOptionIndex.value)}},registerOption(p,g){let O=Vt({id:p,dataRef:g});if(f.virtual.value){r.value.push(O);return}x&&cancelAnimationFrame(x);let v=S(m=>(m.push(O),m));d.value===null&&f.isSelected(g.value.value)&&(v.activeOptionIndex=v.options.indexOf(O)),r.value=v.options,d.value=v.activeOptionIndex,h.value=2,v.options.some(m=>!z(m.dataRef.domRef))&&(x=requestAnimationFrame(()=>{let m=S();r.value=m.options,d.value=m.activeOptionIndex}))},unregisterOption(p,g){if(D!==null&&cancelAnimationFrame(D),g&&(b.value=!0),f.virtual.value){r.value=r.value.filter(v=>v.id!==p);return}let O=S(v=>{let m=v.findIndex(w=>w.id===p);return m!==-1&&v.splice(m,1),v});r.value=O.options,d.value=O.activeOptionIndex,h.value=2},isSelected(p){return fe(R.value,{0:()=>f.compare(oe(f.value.value),oe(p)),1:()=>oe(f.value.value).some(g=>f.compare(oe(g),oe(p)))})},isActive(p){return d.value===f.calculateIndex(p)}};jt([l,a,c],()=>f.closeCombobox(),E(()=>s.value===0)),at(wt,f),Kt(E(()=>fe(s.value,{0:Ee.Open,1:Ee.Closed})));let C=E(()=>{var p;return(p=z(l))==null?void 0:p.closest("form")});return ye(()=>{X([C],()=>{if(!C.value||e.defaultValue===void 0)return;function p(){f.change(e.defaultValue)}return C.value.addEventListener("reset",p),()=>{var g;(g=C.value)==null||g.removeEventListener("reset",p)}},{immediate:!0})}),()=>{var p,g,O;let{name:v,disabled:m,form:w,...M}=e,A={open:s.value===0,disabled:m,activeIndex:f.activeOptionIndex.value,activeOption:f.activeOptionIndex.value===null?null:f.virtual.value?f.virtual.value.options[(p=f.activeOptionIndex.value)!=null?p:0]:(O=(g=f.options.value[f.activeOptionIndex.value])==null?void 0:g.dataRef.value)!=null?O:null,value:T.value};return xe(Ce,[...v!=null&&T.value!=null?St({[v]:T.value}).map(([N,Z])=>xe(Ut,Ht({features:Wt.Hidden,key:N,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:w,disabled:m,name:N,value:Z}))):[],$e({theirProps:{...t,...je(M,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:A,slots:n,attrs:t,name:"Combobox"})])}}}),jn=se({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:n,attrs:t,slots:o,expose:s}){var i;let l=(i=e.id)!=null?i:`headlessui-combobox-input-${Ke()}`,a=Oe("ComboboxInput"),c=E(()=>it(z(a.inputRef))),u={value:!1};s({el:a.inputRef,$el:a.inputRef});function r(){a.change(null);let x=z(a.optionsRef);x&&(x.scrollTop=0),a.goToOption(V.Nothing)}let d=E(()=>{var x;let _=a.value.value;return z(a.inputRef)?typeof e.displayValue<"u"&&_!==void 0?(x=e.displayValue(_))!=null?x:"":typeof _=="string"?_:"":""});ye(()=>{X([d,a.comboboxState,c],([x,_],[y,f])=>{if(u.value)return;let C=z(a.inputRef);C&&((f===0&&_===1||x!==y)&&(C.value=x),requestAnimationFrame(()=>{var p;if(u.value||!C||((p=c.value)==null?void 0:p.activeElement)!==C)return;let{selectionStart:g,selectionEnd:O}=C;Math.abs((O??0)-(g??0))===0&&g===0&&C.setSelectionRange(C.value.length,C.value.length)}))},{immediate:!0}),X([a.comboboxState],([x],[_])=>{if(x===0&&_===1){if(u.value)return;let y=z(a.inputRef);if(!y)return;let f=y.value,{selectionStart:C,selectionEnd:p,selectionDirection:g}=y;y.value="",y.value=f,g!==null?y.setSelectionRange(C,p,g):y.setSelectionRange(C,p)}})});let h=B(!1);function b(){h.value=!0}function S(){Fe().nextFrame(()=>{h.value=!1})}let R=$n();function P(x){switch(u.value=!0,R(()=>{u.value=!1}),x.key){case ee.Enter:if(u.value=!1,a.comboboxState.value!==0||h.value)return;if(x.preventDefault(),x.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case ee.ArrowDown:return u.value=!1,x.preventDefault(),x.stopPropagation(),fe(a.comboboxState.value,{0:()=>a.goToOption(V.Next),1:()=>a.openCombobox()});case ee.ArrowUp:return u.value=!1,x.preventDefault(),x.stopPropagation(),fe(a.comboboxState.value,{0:()=>a.goToOption(V.Previous),1:()=>{a.openCombobox(),rt(()=>{a.value.value||a.goToOption(V.Last)})}});case ee.Home:if(x.shiftKey)break;return u.value=!1,x.preventDefault(),x.stopPropagation(),a.goToOption(V.First);case ee.PageUp:return u.value=!1,x.preventDefault(),x.stopPropagation(),a.goToOption(V.First);case ee.End:if(x.shiftKey)break;return u.value=!1,x.preventDefault(),x.stopPropagation(),a.goToOption(V.Last);case ee.PageDown:return u.value=!1,x.preventDefault(),x.stopPropagation(),a.goToOption(V.Last);case ee.Escape:if(u.value=!1,a.comboboxState.value!==0)return;x.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&x.stopPropagation(),a.nullable.value&&a.mode.value===0&&a.value.value===null&&r(),a.closeCombobox();break;case ee.Tab:if(u.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.activationTrigger.value!==1&&a.selectActiveOption(),a.closeCombobox();break}}function $(x){n("change",x),a.nullable.value&&a.mode.value===0&&x.target.value===""&&r(),a.openCombobox()}function I(x){var _,y,f;let C=(_=x.relatedTarget)!=null?_:Je.find(p=>p!==x.currentTarget);if(u.value=!1,!((y=z(a.optionsRef))!=null&&y.contains(C))&&!((f=z(a.buttonRef))!=null&&f.contains(C))&&a.comboboxState.value===0)return x.preventDefault(),a.mode.value===0&&(a.nullable.value&&a.value.value===null?r():a.activationTrigger.value!==1&&a.selectActiveOption()),a.closeCombobox()}function T(x){var _,y,f;let C=(_=x.relatedTarget)!=null?_:Je.find(p=>p!==x.currentTarget);(y=z(a.buttonRef))!=null&&y.contains(C)||(f=z(a.optionsRef))!=null&&f.contains(C)||a.disabled.value||a.immediate.value&&a.comboboxState.value!==0&&(a.openCombobox(),Fe().nextFrame(()=>{a.setActivationTrigger(1)}))}let D=E(()=>{var x,_,y,f;return(f=(y=(_=e.defaultValue)!=null?_:a.defaultValue.value!==void 0?(x=e.displayValue)==null?void 0:x.call(e,a.defaultValue.value):null)!=null?y:a.defaultValue.value)!=null?f:""});return()=>{var x,_,y,f,C,p,g;let O={open:a.comboboxState.value===0},{displayValue:v,onChange:m,...w}=e,M={"aria-controls":(x=a.optionsRef.value)==null?void 0:x.id,"aria-expanded":a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null?void 0:a.virtual.value?(_=a.options.value.find(A=>!a.virtual.value.disabled(A.dataRef.value)&&a.compare(A.dataRef.value,a.virtual.value.options[a.activeOptionIndex.value])))==null?void 0:_.id:(y=a.options.value[a.activeOptionIndex.value])==null?void 0:y.id,"aria-labelledby":(p=(f=z(a.labelRef))==null?void 0:f.id)!=null?p:(C=z(a.buttonRef))==null?void 0:C.id,"aria-autocomplete":"list",id:l,onCompositionstart:b,onCompositionend:S,onKeydown:P,onInput:$,onFocus:T,onBlur:I,role:"combobox",type:(g=t.type)!=null?g:"text",tabIndex:0,ref:a.inputRef,defaultValue:D.value,disabled:a.disabled.value===!0?!0:void 0};return $e({ourProps:M,theirProps:w,slot:O,attrs:t,slots:o,features:ke.RenderStrategy|ke.Static,name:"ComboboxInput"})}}}),Kn=se({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:n,slots:t,expose:o}){let s=Oe("ComboboxOptions"),i=`headlessui-combobox-options-${Ke()}`;o({el:s.optionsRef,$el:s.optionsRef}),be(()=>{s.optionsPropsRef.value.static=e.static}),be(()=>{s.optionsPropsRef.value.hold=e.hold});let l=qt(),a=E(()=>l!==null?(l.value&Ee.Open)===Ee.Open:s.comboboxState.value===0);_n({container:E(()=>z(s.optionsRef)),enabled:E(()=>s.comboboxState.value===0),accept(u){return u.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});function c(u){u.preventDefault()}return()=>{var u,r,d;let h={open:s.comboboxState.value===0},b={"aria-labelledby":(d=(u=z(s.labelRef))==null?void 0:u.id)!=null?d:(r=z(s.buttonRef))==null?void 0:r.id,id:i,ref:s.optionsRef,role:"listbox","aria-multiselectable":s.mode.value===1?!0:void 0,onMousedown:c},S=je(e,["hold"]);return $e({ourProps:b,theirProps:S,slot:h,attrs:n,slots:s.virtual.value&&s.comboboxState.value===0?{...t,default:()=>[xe(Nn,{},t.default)]}:t,features:ke.RenderStrategy|ke.Static,visible:a.value,name:"ComboboxOptions"})}}}),Un=se({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:n,attrs:t,expose:o}){let s=Oe("ComboboxOption"),i=`headlessui-combobox-option-${Ke()}`,l=B(null),a=E(()=>e.disabled);o({el:l,$el:l});let c=E(()=>{var I;return s.virtual.value?s.activeOptionIndex.value===s.calculateIndex(e.value):s.activeOptionIndex.value===null?!1:((I=s.options.value[s.activeOptionIndex.value])==null?void 0:I.id)===i}),u=E(()=>s.isSelected(e.value)),r=lt(Mt,null),d=E(()=>({disabled:e.disabled,value:e.value,domRef:l,order:E(()=>e.order)}));ye(()=>s.registerOption(i,d)),ot(()=>s.unregisterOption(i,c.value)),be(()=>{let I=z(l);I&&(r==null||r.value.measureElement(I))}),be(()=>{s.comboboxState.value===0&&c.value&&(s.virtual.value||s.activationTrigger.value!==0&&rt(()=>{var I,T;return(T=(I=z(l))==null?void 0:I.scrollIntoView)==null?void 0:T.call(I,{block:"nearest"})}))});function h(I){I.preventDefault(),I.button===xt.Left&&(a.value||(s.selectOption(i),Jt()||requestAnimationFrame(()=>{var T;return(T=z(s.inputRef))==null?void 0:T.focus({preventScroll:!0})}),s.mode.value===0&&s.closeCombobox()))}function b(){var I;if(e.disabled||(I=s.virtual.value)!=null&&I.disabled(e.value))return s.goToOption(V.Nothing);let T=s.calculateIndex(e.value);s.goToOption(V.Specific,T)}let S=An();function R(I){S.update(I)}function P(I){var T;if(!S.wasMoved(I)||e.disabled||(T=s.virtual.value)!=null&&T.disabled(e.value)||c.value)return;let D=s.calculateIndex(e.value);s.goToOption(V.Specific,D,0)}function $(I){var T;S.wasMoved(I)&&(e.disabled||(T=s.virtual.value)!=null&&T.disabled(e.value)||c.value&&(s.optionsPropsRef.value.hold||s.goToOption(V.Nothing)))}return()=>{let{disabled:I}=e,T={active:c.value,selected:u.value,disabled:I},D={id:i,ref:l,role:"option",tabIndex:I===!0?void 0:-1,"aria-disabled":I===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onMousedown:h,onFocus:b,onPointerenter:R,onMouseenter:R,onPointermove:P,onMousemove:P,onPointerleave:$,onMouseleave:$},x=je(e,["order","value"]);return $e({ourProps:D,theirProps:x,slot:T,attrs:t,slots:n,name:"ComboboxOption"})}}});function ne(e){return Array.isArray?Array.isArray(e):kt(e)==="[object Array]"}const Hn=1/0;function Wn(e){if(typeof e=="string")return e;let n=e+"";return n=="0"&&1/e==-Hn?"-0":n}function qn(e){return e==null?"":Wn(e)}function Q(e){return typeof e=="string"}function Et(e){return typeof e=="number"}function Gn(e){return e===!0||e===!1||Yn(e)&&kt(e)=="[object Boolean]"}function Ct(e){return typeof e=="object"}function Yn(e){return Ct(e)&&e!==null}function U(e){return e!=null}function Pe(e){return!e.trim().length}function kt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Jn="Incorrect 'index' type",Qn=e=>`Invalid value for key ${e}`,Xn=e=>`Pattern length exceeds max of ${e}.`,Zn=e=>`Missing ${e} property in key`,es=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ze=Object.prototype.hasOwnProperty;class ts{constructor(n){this._keys=[],this._keyMap={};let t=0;n.forEach(o=>{let s=Rt(o);t+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight}),this._keys.forEach(o=>{o.weight/=t})}get(n){return this._keyMap[n]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Rt(e){let n=null,t=null,o=null,s=1,i=null;if(Q(e)||ne(e))o=e,n=et(e),t=Le(e);else{if(!Ze.call(e,"name"))throw new Error(Zn("name"));const l=e.name;if(o=l,Ze.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(es(l));n=et(l),t=Le(l),i=e.getFn}return{path:n,id:t,weight:s,src:o,getFn:i}}function et(e){return ne(e)?e:e.split(".")}function Le(e){return ne(e)?e.join("."):e}function ns(e,n){let t=[],o=!1;const s=(i,l,a)=>{if(U(i))if(!l[a])t.push(i);else{let c=l[a];const u=i[c];if(!U(u))return;if(a===l.length-1&&(Q(u)||Et(u)||Gn(u)))t.push(qn(u));else if(ne(u)){o=!0;for(let r=0,d=u.length;r<d;r+=1)s(u[r],l,a+1)}else l.length&&s(u,l,a+1)}};return s(e,Q(n)?n.split("."):n,0),o?t:t[0]}const ss={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},os={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,n)=>e.score===n.score?e.idx<n.idx?-1:1:e.score<n.score?-1:1},is={location:0,threshold:.6,distance:100},as={useExtendedSearch:!1,getFn:ns,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var k={...os,...ss,...is,...as};const ls=/[^ ]+/g;function rs(e=1,n=3){const t=new Map,o=Math.pow(10,n);return{get(s){const i=s.match(ls).length;if(t.has(i))return t.get(i);const l=1/Math.pow(i,.5*e),a=parseFloat(Math.round(l*o)/o);return t.set(i,a),a},clear(){t.clear()}}}class Ge{constructor({getFn:n=k.getFn,fieldNormWeight:t=k.fieldNormWeight}={}){this.norm=rs(t,3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}setSources(n=[]){this.docs=n}setIndexRecords(n=[]){this.records=n}setKeys(n=[]){this.keys=n,this._keysMap={},n.forEach((t,o)=>{this._keysMap[t.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Q(this.docs[0])?this.docs.forEach((n,t)=>{this._addString(n,t)}):this.docs.forEach((n,t)=>{this._addObject(n,t)}),this.norm.clear())}add(n){const t=this.size();Q(n)?this._addString(n,t):this._addObject(n,t)}removeAt(n){this.records.splice(n,1);for(let t=n,o=this.size();t<o;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(n,t){return n[this._keysMap[t]]}size(){return this.records.length}_addString(n,t){if(!U(n)||Pe(n))return;let o={v:n,i:t,n:this.norm.get(n)};this.records.push(o)}_addObject(n,t){let o={i:t,$:{}};this.keys.forEach((s,i)=>{let l=s.getFn?s.getFn(n):this.getFn(n,s.path);if(U(l)){if(ne(l)){let a=[];const c=[{nestedArrIndex:-1,value:l}];for(;c.length;){const{nestedArrIndex:u,value:r}=c.pop();if(U(r))if(Q(r)&&!Pe(r)){let d={v:r,i:u,n:this.norm.get(r)};a.push(d)}else ne(r)&&r.forEach((d,h)=>{c.push({nestedArrIndex:h,value:d})})}o.$[i]=a}else if(Q(l)&&!Pe(l)){let a={v:l,n:this.norm.get(l)};o.$[i]=a}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function Tt(e,n,{getFn:t=k.getFn,fieldNormWeight:o=k.fieldNormWeight}={}){const s=new Ge({getFn:t,fieldNormWeight:o});return s.setKeys(e.map(Rt)),s.setSources(n),s.create(),s}function us(e,{getFn:n=k.getFn,fieldNormWeight:t=k.fieldNormWeight}={}){const{keys:o,records:s}=e,i=new Ge({getFn:n,fieldNormWeight:t});return i.setKeys(o),i.setIndexRecords(s),i}function Me(e,{errors:n=0,currentLocation:t=0,expectedLocation:o=0,distance:s=k.distance,ignoreLocation:i=k.ignoreLocation}={}){const l=n/e.length;if(i)return l;const a=Math.abs(o-t);return s?l+a/s:a?1:l}function cs(e=[],n=k.minMatchCharLength){let t=[],o=-1,s=-1,i=0;for(let l=e.length;i<l;i+=1){let a=e[i];a&&o===-1?o=i:!a&&o!==-1&&(s=i-1,s-o+1>=n&&t.push([o,s]),o=-1)}return e[i-1]&&i-o>=n&&t.push([o,i-1]),t}const ue=32;function ds(e,n,t,{location:o=k.location,distance:s=k.distance,threshold:i=k.threshold,findAllMatches:l=k.findAllMatches,minMatchCharLength:a=k.minMatchCharLength,includeMatches:c=k.includeMatches,ignoreLocation:u=k.ignoreLocation}={}){if(n.length>ue)throw new Error(Xn(ue));const r=n.length,d=e.length,h=Math.max(0,Math.min(o,d));let b=i,S=h;const R=a>1||c,P=R?Array(d):[];let $;for(;($=e.indexOf(n,S))>-1;){let y=Me(n,{currentLocation:$,expectedLocation:h,distance:s,ignoreLocation:u});if(b=Math.min(y,b),S=$+r,R){let f=0;for(;f<r;)P[$+f]=1,f+=1}}S=-1;let I=[],T=1,D=r+d;const x=1<<r-1;for(let y=0;y<r;y+=1){let f=0,C=D;for(;f<C;)Me(n,{errors:y,currentLocation:h+C,expectedLocation:h,distance:s,ignoreLocation:u})<=b?f=C:D=C,C=Math.floor((D-f)/2+f);D=C;let p=Math.max(1,h-C+1),g=l?d:Math.min(h+C,d)+r,O=Array(g+2);O[g+1]=(1<<y)-1;for(let m=g;m>=p;m-=1){let w=m-1,M=t[e.charAt(w)];if(R&&(P[w]=+!!M),O[m]=(O[m+1]<<1|1)&M,y&&(O[m]|=(I[m+1]|I[m])<<1|1|I[m+1]),O[m]&x&&(T=Me(n,{errors:y,currentLocation:w,expectedLocation:h,distance:s,ignoreLocation:u}),T<=b)){if(b=T,S=w,S<=h)break;p=Math.max(1,2*h-S)}}if(Me(n,{errors:y+1,currentLocation:h,expectedLocation:h,distance:s,ignoreLocation:u})>b)break;I=O}const _={isMatch:S>=0,score:Math.max(.001,T)};if(R){const y=cs(P,a);y.length?c&&(_.indices=y):_.isMatch=!1}return _}function hs(e){let n={};for(let t=0,o=e.length;t<o;t+=1){const s=e.charAt(t);n[s]=(n[s]||0)|1<<o-t-1}return n}class $t{constructor(n,{location:t=k.location,threshold:o=k.threshold,distance:s=k.distance,includeMatches:i=k.includeMatches,findAllMatches:l=k.findAllMatches,minMatchCharLength:a=k.minMatchCharLength,isCaseSensitive:c=k.isCaseSensitive,ignoreLocation:u=k.ignoreLocation}={}){if(this.options={location:t,threshold:o,distance:s,includeMatches:i,findAllMatches:l,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?n:n.toLowerCase(),this.chunks=[],!this.pattern.length)return;const r=(h,b)=>{this.chunks.push({pattern:h,alphabet:hs(h),startIndex:b})},d=this.pattern.length;if(d>ue){let h=0;const b=d%ue,S=d-b;for(;h<S;)r(this.pattern.substr(h,ue),h),h+=ue;if(b){const R=d-ue;r(this.pattern.substr(R),R)}}else r(this.pattern,0)}searchIn(n){const{isCaseSensitive:t,includeMatches:o}=this.options;if(t||(n=n.toLowerCase()),this.pattern===n){let S={isMatch:!0,score:0};return o&&(S.indices=[[0,n.length-1]]),S}const{location:s,distance:i,threshold:l,findAllMatches:a,minMatchCharLength:c,ignoreLocation:u}=this.options;let r=[],d=0,h=!1;this.chunks.forEach(({pattern:S,alphabet:R,startIndex:P})=>{const{isMatch:$,score:I,indices:T}=ds(n,S,R,{location:s+P,distance:i,threshold:l,findAllMatches:a,minMatchCharLength:c,includeMatches:o,ignoreLocation:u});$&&(h=!0),d+=I,$&&T&&(r=[...r,...T])});let b={isMatch:h,score:h?d/this.chunks.length:1};return h&&o&&(b.indices=r),b}}class le{constructor(n){this.pattern=n}static isMultiMatch(n){return tt(n,this.multiRegex)}static isSingleMatch(n){return tt(n,this.singleRegex)}search(){}}function tt(e,n){const t=e.match(n);return t?t[1]:null}class fs extends le{constructor(n){super(n)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(n){const t=n===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ps extends le{constructor(n){super(n)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(n){const o=n.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,n.length-1]}}}class vs extends le{constructor(n){super(n)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(n){const t=n.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ms extends le{constructor(n){super(n)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(n){const t=!n.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,n.length-1]}}}class gs extends le{constructor(n){super(n)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(n){const t=n.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[n.length-this.pattern.length,n.length-1]}}}class bs extends le{constructor(n){super(n)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(n){const t=!n.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,n.length-1]}}}class At extends le{constructor(n,{location:t=k.location,threshold:o=k.threshold,distance:s=k.distance,includeMatches:i=k.includeMatches,findAllMatches:l=k.findAllMatches,minMatchCharLength:a=k.minMatchCharLength,isCaseSensitive:c=k.isCaseSensitive,ignoreLocation:u=k.ignoreLocation}={}){super(n),this._bitapSearch=new $t(n,{location:t,threshold:o,distance:s,includeMatches:i,findAllMatches:l,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(n){return this._bitapSearch.searchIn(n)}}class _t extends le{constructor(n){super(n)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(n){let t=0,o;const s=[],i=this.pattern.length;for(;(o=n.indexOf(this.pattern,t))>-1;)t=o+i,s.push([o,t-1]);const l=!!s.length;return{isMatch:l,score:l?0:1,indices:s}}}const Be=[fs,_t,vs,ms,bs,gs,ps,At],nt=Be.length,ys=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,xs="|";function Ss(e,n={}){return e.split(xs).map(t=>{let o=t.trim().split(ys).filter(i=>i&&!!i.trim()),s=[];for(let i=0,l=o.length;i<l;i+=1){const a=o[i];let c=!1,u=-1;for(;!c&&++u<nt;){const r=Be[u];let d=r.isMultiMatch(a);d&&(s.push(new r(d,n)),c=!0)}if(!c)for(u=-1;++u<nt;){const r=Be[u];let d=r.isSingleMatch(a);if(d){s.push(new r(d,n));break}}}return s})}const Is=new Set([At.type,_t.type]);class Os{constructor(n,{isCaseSensitive:t=k.isCaseSensitive,includeMatches:o=k.includeMatches,minMatchCharLength:s=k.minMatchCharLength,ignoreLocation:i=k.ignoreLocation,findAllMatches:l=k.findAllMatches,location:a=k.location,threshold:c=k.threshold,distance:u=k.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:o,minMatchCharLength:s,findAllMatches:l,ignoreLocation:i,location:a,threshold:c,distance:u},this.pattern=t?n:n.toLowerCase(),this.query=Ss(this.pattern,this.options)}static condition(n,t){return t.useExtendedSearch}searchIn(n){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:s}=this.options;n=s?n:n.toLowerCase();let i=0,l=[],a=0;for(let c=0,u=t.length;c<u;c+=1){const r=t[c];l.length=0,i=0;for(let d=0,h=r.length;d<h;d+=1){const b=r[d],{isMatch:S,indices:R,score:P}=b.search(n);if(S){if(i+=1,a+=P,o){const $=b.constructor.type;Is.has($)?l=[...l,...R]:l.push(R)}}else{a=0,i=0,l.length=0;break}}if(i){let d={isMatch:!0,score:a/i};return o&&(d.indices=l),d}}return{isMatch:!1,score:1}}}const ze=[];function ws(...e){ze.push(...e)}function De(e,n){for(let t=0,o=ze.length;t<o;t+=1){let s=ze[t];if(s.condition(e,n))return new s(e,n)}return new $t(e,n)}const Te={AND:"$and",OR:"$or"},Ne={PATH:"$path",PATTERN:"$val"},Ve=e=>!!(e[Te.AND]||e[Te.OR]),Ms=e=>!!e[Ne.PATH],Es=e=>!ne(e)&&Ct(e)&&!Ve(e),st=e=>({[Te.AND]:Object.keys(e).map(n=>({[n]:e[n]}))});function Pt(e,n,{auto:t=!0}={}){const o=s=>{let i=Object.keys(s);const l=Ms(s);if(!l&&i.length>1&&!Ve(s))return o(st(s));if(Es(s)){const c=l?s[Ne.PATH]:i[0],u=l?s[Ne.PATTERN]:s[c];if(!Q(u))throw new Error(Qn(c));const r={keyId:Le(c),pattern:u};return t&&(r.searcher=De(u,n)),r}let a={children:[],operator:i[0]};return i.forEach(c=>{const u=s[c];ne(u)&&u.forEach(r=>{a.children.push(o(r))})}),a};return Ve(e)||(e=st(e)),o(e)}function Cs(e,{ignoreFieldNorm:n=k.ignoreFieldNorm}){e.forEach(t=>{let o=1;t.matches.forEach(({key:s,norm:i,score:l})=>{const a=s?s.weight:null;o*=Math.pow(l===0&&a?Number.EPSILON:l,(a||1)*(n?1:i))}),t.score=o})}function ks(e,n){const t=e.matches;n.matches=[],U(t)&&t.forEach(o=>{if(!U(o.indices)||!o.indices.length)return;const{indices:s,value:i}=o;let l={indices:s,value:i};o.key&&(l.key=o.key.src),o.idx>-1&&(l.refIndex=o.idx),n.matches.push(l)})}function Rs(e,n){n.score=e.score}function Ts(e,n,{includeMatches:t=k.includeMatches,includeScore:o=k.includeScore}={}){const s=[];return t&&s.push(ks),o&&s.push(Rs),e.map(i=>{const{idx:l}=i,a={item:n[l],refIndex:l};return s.length&&s.forEach(c=>{c(i,a)}),a})}class pe{constructor(n,t={},o){this.options={...k,...t},this.options.useExtendedSearch,this._keyStore=new ts(this.options.keys),this.setCollection(n,o)}setCollection(n,t){if(this._docs=n,t&&!(t instanceof Ge))throw new Error(Jn);this._myIndex=t||Tt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(n){U(n)&&(this._docs.push(n),this._myIndex.add(n))}remove(n=()=>!1){const t=[];for(let o=0,s=this._docs.length;o<s;o+=1){const i=this._docs[o];n(i,o)&&(this.removeAt(o),o-=1,s-=1,t.push(i))}return t}removeAt(n){this._docs.splice(n,1),this._myIndex.removeAt(n)}getIndex(){return this._myIndex}search(n,{limit:t=-1}={}){const{includeMatches:o,includeScore:s,shouldSort:i,sortFn:l,ignoreFieldNorm:a}=this.options;let c=Q(n)?Q(this._docs[0])?this._searchStringList(n):this._searchObjectList(n):this._searchLogical(n);return Cs(c,{ignoreFieldNorm:a}),i&&c.sort(l),Et(t)&&t>-1&&(c=c.slice(0,t)),Ts(c,this._docs,{includeMatches:o,includeScore:s})}_searchStringList(n){const t=De(n,this.options),{records:o}=this._myIndex,s=[];return o.forEach(({v:i,i:l,n:a})=>{if(!U(i))return;const{isMatch:c,score:u,indices:r}=t.searchIn(i);c&&s.push({item:i,idx:l,matches:[{score:u,value:i,norm:a,indices:r}]})}),s}_searchLogical(n){const t=Pt(n,this.options),o=(a,c,u)=>{if(!a.children){const{keyId:d,searcher:h}=a,b=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:h});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}const r=[];for(let d=0,h=a.children.length;d<h;d+=1){const b=a.children[d],S=o(b,c,u);if(S.length)r.push(...S);else if(a.operator===Te.AND)return[]}return r},s=this._myIndex.records,i={},l=[];return s.forEach(({$:a,i:c})=>{if(U(a)){let u=o(t,a,c);u.length&&(i[c]||(i[c]={idx:c,item:a,matches:[]},l.push(i[c])),u.forEach(({matches:r})=>{i[c].matches.push(...r)}))}}),l}_searchObjectList(n){const t=De(n,this.options),{keys:o,records:s}=this._myIndex,i=[];return s.forEach(({$:l,i:a})=>{if(!U(l))return;let c=[];o.forEach((u,r)=>{c.push(...this._findMatches({key:u,value:l[r],searcher:t}))}),c.length&&i.push({idx:a,item:l,matches:c})}),i}_findMatches({key:n,value:t,searcher:o}){if(!U(t))return[];let s=[];if(ne(t))t.forEach(({v:i,i:l,n:a})=>{if(!U(i))return;const{isMatch:c,score:u,indices:r}=o.searchIn(i);c&&s.push({score:u,key:n,value:i,idx:l,norm:a,indices:r})});else{const{v:i,n:l}=t,{isMatch:a,score:c,indices:u}=o.searchIn(i);a&&s.push({score:c,key:n,value:i,norm:l,indices:u})}return s}}pe.version="6.6.2";pe.createIndex=Tt;pe.parseIndex=us;pe.config=k;pe.parseQuery=Pt;ws(Os);function $s(e,n,t){const o=()=>{var l,a;return new pe((l=J(n))!=null?l:[],(a=J(t))==null?void 0:a.fuseOptions)},s=B(o());X(()=>{var l;return(l=J(t))==null?void 0:l.fuseOptions},()=>{s.value=o()},{deep:!0}),X(()=>J(n),l=>{s.value.setCollection(l)},{deep:!0});const i=E(()=>{const l=J(t);if(l!=null&&l.matchAllWhenSearchEmpty&&!J(e))return J(n).map((c,u)=>({item:c,refIndex:u}));const a=l==null?void 0:l.resultLimit;return s.value.search(J(e),a?{limit:a}:void 0)});return{fuse:s,results:i}}const As=se({components:{HComboboxOption:Un,UIcon:Ae,UAvatar:ut,UKbd:ct},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const n=E(()=>{const o=e.group[e.groupAttribute];return typeof o=="function"?o(e.query):o});function t(o,{indices:s,value:i}){if(o===i)return"";let l="",a=0;s.forEach(u=>{const r=u[1]+1,d=r-u[0]>=e.query.length;l+=[i.substring(a,u[0]),d&&"<mark>",i.substring(u[0],r),d&&"</mark>"].filter(Boolean).join(""),a=r}),l+=i.substring(a);const c=l.indexOf("<mark>");return c>60&&(l=`...${l.substring(c-60)}`),l}return He(()=>We("$pu17wTWPKE")),{label:n,highlight:t}}}),_s=["aria-label"],Ps=["innerHTML"];function Fs(e,n,t,o,s,i){const l=Ae,a=ut,c=ct,u=te("HComboboxOption");return L(),H("div",{class:F(e.ui.group.wrapper)},[e.label?(L(),H("h2",{key:0,class:F(e.ui.group.label)},ie(e.label),3)):G("",!0),Y("div",{class:F(e.ui.group.container),"aria-label":e.group[e.groupAttribute]},[(L(!0),H(Ce,null,Se(e.group.commands,(r,d)=>(L(),j(u,{key:`${e.group.key}-${d}`,value:r,disabled:r.disabled,as:"template"},{default:W(({active:h,selected:b})=>[Y("div",{class:F([e.ui.group.command.base,h?e.ui.group.command.active:e.ui.group.command.inactive,r.disabled?"cursor-not-allowed":"cursor-pointer"])},[Y("div",{class:F(e.ui.group.command.container)},[ae(e.$slots,`${e.group.key}-icon`,{group:e.group,command:r,active:h,selected:b},()=>[r.icon?(L(),j(l,{key:0,name:r.icon,class:F([e.ui.group.command.icon.base,h?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,r.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):r.avatar?(L(),j(a,ce({key:1},{size:e.ui.group.command.avatar.size,...r.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):r.chip?(L(),H("span",{key:2,class:F(e.ui.group.command.chip.base),style:Qt({background:`#${r.chip}`})},null,6)):G("",!0)]),Y("div",{class:F([e.ui.group.command.label,r.disabled&&e.ui.group.command.disabled])},[ae(e.$slots,`${e.group.key}-command`,{group:e.group,command:r,active:h,selected:b},()=>{var S,R;return[r.prefix?(L(),H("span",{key:0,class:F(["flex-shrink-0",r.prefixClass||e.ui.group.command.prefix])},ie(r.prefix),3)):G("",!0),Y("span",{class:F(["truncate",{"flex-none":r.suffix||((S=r.matches)==null?void 0:S.length)}])},ie(r[e.commandAttribute]),3),(R=r.matches)!=null&&R.length?(L(),H("span",{key:1,class:F(["truncate",r.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(r[e.commandAttribute],r.matches[0])},null,10,Ps)):r.suffix?(L(),H("span",{key:2,class:F(["truncate",r.suffixClass||e.ui.group.command.suffix])},ie(r.suffix),3)):G("",!0)]})],2)],2),b?(L(),j(l,{key:0,name:e.selectedIcon,class:F(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):h&&(e.group.active||e.$slots[`${e.group.key}-active`])?ae(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:r,active:h,selected:b},()=>[e.group.active?(L(),H("span",{key:0,class:F(e.ui.group.active)},ie(e.group.active),3)):G("",!0)]):ae(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:r,active:h,selected:b},()=>{var S;return[(S=r.shortcuts)!=null&&S.length?(L(),H("span",{key:0,class:F(e.ui.group.command.shortcuts)},[(L(!0),H(Ce,null,Se(r.shortcuts,R=>(L(),j(c,{key:R},{default:W(()=>[Xt(ie(R),1)]),_:2},1024))),128))],2)):!r.disabled&&e.group.inactive?(L(),H("span",{key:1,class:F(e.ui.group.inactive)},ie(e.group.inactive),3)):G("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,_s)],2)}const Ls=Ue(As,[["render",Fs]]),he=dt(Re.ui.strategy,Re.ui.commandPalette,mn),Bs=se({components:{HCombobox:Vn,HComboboxInput:jn,HComboboxOptions:Kn,UIcon:Ae,UButton:ht,CommandPaletteGroup:Ls},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>he.default.icon},loadingIcon:{type:String,default:()=>he.default.loadingIcon},selectedIcon:{type:String,default:()=>he.default.selectedIcon},closeButton:{type:Object,default:()=>he.default.closeButton},emptyState:{type:Object,default:()=>he.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:n,expose:t}){const{ui:o,attrs:s}=qe("commandPalette",Ie(e,"ui"),he,Ie(e,"class")),i=B(""),l=B(),a=B(null),c=B(!1);ye(()=>{e.autoselect&&D()}),ye(()=>{setTimeout(()=>{var C;const y=(C=l.value)==null?void 0:C.$.provides;if(!y)return;const f=Object.getOwnPropertySymbols(y);a.value=f.length&&y[f[0]]},200)});const u=E(()=>ft({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),r=E(()=>{var f;const y=[];for(const C of e.groups)C.search||y.push(...((f=C.commands)==null?void 0:f.map(p=>({...p,group:C.key})))||[]);return y}),d=B({}),{results:h}=$s(i,r,u);function b(y,f){if(y)return y.filter&&typeof y.filter=="function"&&(f=y.filter(i.value,f)),{...y,commands:f.slice(0,u.value.resultLimit)}}const S=E(()=>{if(!h.value)return[];const y=h.value.reduce((p,g)=>{var m;const{item:O,...v}=g;return O.group&&(p[m=O.group]||(p[m]=[]),p[O.group].push({...O,...v})),p},{}),f=Object.entries(y).map(([p,g])=>{const O=e.groups.find(v=>v.key===p);return O?b(O,g):null}).filter(Boolean),C=e.groups.filter(p=>{var g;return!!p.search&&((g=d.value[p.key])==null?void 0:g.length)}).map(p=>{const g=d.value[p.key]||[];return b(p,[...g])});return[...f,...C]}),R=pt(async()=>{const y=e.groups.filter(f=>!!f.search);y.length&&(c.value=!0,await Promise.all(y.map(async f=>{d.value[f.key]=await f.search(i.value)})),c.value=!1,T())},e.debounce);X(i,()=>{R(),T()});const P=E(()=>(e.loading||c.value)&&e.loadingIcon?e.loadingIcon:e.icon),$=E(()=>Zt(o.value.input.icon.base,o.value.input.icon.size,(e.loading||c.value)&&e.loadingIcon&&o.value.input.icon.loading)),I=E(()=>e.emptyState===null?null:{...o.value.default.emptyState,...e.emptyState});function T(){setTimeout(()=>{var y;(y=l.value)==null||y.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function D(){setTimeout(()=>{var y;(y=l.value)==null||y.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function x(y){n("update:modelValue",y,{query:i.value}),e.autoclear&&setTimeout(()=>{i.value=""},0)}function _(){i.value?i.value="":n("close")}return t({query:i,updateQuery:y=>{i.value=y},comboboxApi:a,results:h}),He(()=>We("$5qu8Ure9MY")),{ui:o,attrs:s,groups:S,comboboxInput:l,query:i,iconName:P,iconClass:$,emptyState:I,onSelect:x,onClear:_}}});function zs(e,n,t,o,s,i){const l=Ae,a=te("HComboboxInput"),c=ht,u=te("CommandPaletteGroup"),r=te("HComboboxOptions"),d=te("HCombobox");return L(),j(d,ce({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:W(()=>[en(Y("div",{class:F(e.ui.input.wrapper)},[e.iconName?(L(),j(l,{key:0,name:e.iconName,class:F(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),ge(a,{ref:"comboboxInput",value:e.query,class:F([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding,e.closeButton&&e.ui.input.closeButton.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:n[0]||(n[0]=h=>e.query=h.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(L(),j(c,ce({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{class:e.ui.input.closeButton.base,onClick:e.onClear}),null,16,["class","onClick"])):G("",!0)],2),[[tn,e.searchable]]),e.groups.length?(L(),j(r,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:F(e.ui.container)},{default:W(()=>[(L(!0),H(Ce,null,Se(e.groups,h=>(L(),j(u,{key:h.key,query:e.query,group:h,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},vt({_:2},[Se(e.$slots,(b,S)=>({name:S,fn:W(R=>[ae(e.$slots,S,mt(gt(R)))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?ae(e.$slots,"empty-state",{key:1},()=>[Y("div",{class:F(e.ui.emptyState.wrapper)},[e.emptyState.icon?(L(),j(l,{key:0,name:e.emptyState.icon,class:F(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),Y("p",{class:F(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},ie(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):G("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const Ds=Ue(Bs,[["render",zs]]),Ns=dt(Re.ui.strategy,Re.ui.modal,gn),Vs=se({components:{HDialog:nn,HDialogPanel:sn,TransitionRoot:on,TransitionChild:an},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:n}){const{ui:t,attrs:o}=qe("modal",Ie(e,"ui"),Ns,Ie(e,"class")),s=E({get(){return e.modelValue},set(c){n("update:modelValue",c)}}),i=E(()=>e.transition?{...t.value.transition}:{});function l(c){if(e.preventClose){n("close-prevented");return}s.value=c,n("close")}const a=()=>{n("after-leave")};return He(()=>We("$QwMLcnuZeq")),{ui:t,attrs:o,isOpen:s,transitionClass:i,onAfterLeave:a,close:l}}});function js(e,n,t,o,s,i){const l=te("TransitionChild"),a=te("HDialogPanel"),c=te("HDialog"),u=te("TransitionRoot");return L(),j(u,{appear:e.appear,show:e.isOpen,as:"template",onAfterLeave:e.onAfterLeave},{default:W(()=>[ge(c,ce({class:e.ui.wrapper},e.attrs,{onClose:e.close}),{default:W(()=>[e.overlay?(L(),j(l,ce({key:0,as:"template",appear:e.appear},e.ui.overlay.transition),{default:W(()=>[Y("div",{class:F([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear"])):G("",!0),Y("div",{class:F(e.ui.inner)},[Y("div",{class:F([e.ui.container,!e.fullscreen&&e.ui.padding])},[ge(l,ce({as:"template",appear:e.appear},e.transitionClass),{default:W(()=>[ge(a,{class:F([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?e.ui.fullscreen:[e.ui.width,e.ui.height,e.ui.rounded,e.ui.margin]])},{default:W(()=>[ae(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear"])],2)],2)]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const Ks=Ue(Vs,[["render",js]]),Ft=e=>{if(!e.children)return e._path;for(const n of(e==null?void 0:e.children)||[]){const t=Ft(n);if(t)return t}},Lt=(e,n)=>{for(const t of n){if(t._path===e&&!t._id)return t.children;if(t.children){const o=Lt(e,t.children);if(o)return o}}},Bt=(e,n)=>{for(const t of n){if(t._path===e)return t;if(t.children){const o=Bt(e,t.children);if(o)return o}}},Us=(e,n,t)=>{let o;const s=(i,l)=>{for(const a of l)if(!(i!=="/"&&a._path==="/")){if(i!=null&&i.startsWith(a._path)&&a[n]&&(o=a[n]),a._path===i)return;a.children&&s(i,a.children)}};return s(e,t),o},Hs=()=>({navBottomLink:Ft,navDirFromPath:Lt,navPageFromPath:Bt,navKeyFromPath:Us});function Ws(...e){return E(()=>e.every(n=>J(n)))}function qs(e){return E(()=>!J(e))}const Gs=/^[^-]+.*-.*[^-]+$/,Ys=/^[^_]+.*_.*[^_]+$/,Js=(e,n={})=>{const{macOS:t,usingInput:o}=bt();let s=[];const i=B([]),l=()=>{i.value.splice(0,i.value.length)},a=pt(l,n.chainDelay??800),c=u=>{if(!u.key)return;const r=/^[a-z]{1}$/i.test(u.key);let d;if(i.value.push(u.key),i.value.length>=2){d=i.value.slice(-2).join("-");for(const h of s.filter(b=>b.chained))if(h.key===d){h.condition.value&&(u.preventDefault(),h.handler()),l();return}}for(const h of s.filter(b=>!b.chained))if(u.key.toLowerCase()===h.key&&u.metaKey===h.metaKey&&u.ctrlKey===h.ctrlKey&&!(r&&u.shiftKey!==h.shiftKey)){h.condition.value&&(u.preventDefault(),h.handler()),l();return}a()};s=Object.entries(e).map(([u,r])=>{var S,R;if(!r)return null;let d;u.includes("-")&&u!=="-"&&!((S=u.match(Gs))!=null&&S.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`),u.includes("_")&&u!=="_"&&!((R=u.match(Ys))!=null&&R.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`);const h=u.includes("-")&&u!=="-";if(h)d={key:u.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const P=u.toLowerCase().split("_").map($=>$);d={key:P.filter($=>!["meta","ctrl","shift","alt"].includes($)).join("_"),metaKey:P.includes("meta"),ctrlKey:P.includes("ctrl"),shiftKey:P.includes("shift"),altKey:P.includes("alt")}}if(d.chained=h,!t.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof r=="function"?d.handler=r:typeof r=="object"&&(d={...d,handler:r.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;const b=[];return r.usingInput?typeof r.usingInput=="string"&&b.push(E(()=>o.value===r.usingInput)):b.push(qs(o)),d.condition=Ws(...b,...r.whenever||[]),d}).filter(Boolean),ln("keydown",c)},Qs=se({inheritAttrs:!1,__name:"ContentSearch",props:{modelValue:{type:Boolean,default:void 0},files:{type:Array,default:()=>[]},navigation:{type:Array,default:()=>[]},links:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},fuse:{type:Object,default:()=>({})},hideColorMode:{type:Boolean,default:!1},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:n,emit:t}){const o=rn(),s=E(()=>({padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-dvh sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10"},fileIcon:{name:"i-heroicons-document-text"},default:{closeButton:{icon:o.ui.icons.close,color:"gray",variant:"ghost",size:"sm"}}})),i=e,l=t,a=un(),{navKeyFromPath:c}=Hs(),{usingInput:u}=bt(),{isContentSearchModalOpen:r}=cn(),d=dn(vn),h=hn(),{ui:b,attrs:S}=qe("content.search",Ie(i,"ui"),s,void 0,!0),R=d.smaller("sm"),P=B();function $(v){var m;return v.icon?v.icon:(m=v.navigation)!=null&&m.icon?v.navigation.icon:(i.navigation&&(v.icon=c(v._path,"icon",i.navigation)),v.icon||b.value.fileIcon.name)}const I=E({get(){return i.modelValue!==void 0?i.modelValue:r.value},set(v){i.modelValue!==void 0?l("update:modelValue",v):r.value=v}}),T=E(()=>ft({},i.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value","children.children.children.children.value","children.children.children.children.children.value"]},resultLimit:12}));function D(v,m){return v?m:m==null?void 0:m.filter(w=>!w.child)}const x=E(()=>{var m,w;let v=[];return(m=i.navigation)!=null&&m.length&&(i.navigation.some(M=>{var A;return!!((A=M.children)!=null&&A.length)})?v=(i.navigation||[]).map(M=>({key:M._path,label:M.title,commands:(i.files||[]).filter(A=>{var N;return(N=A._path)==null?void 0:N.startsWith(M._path)}).flatMap(A=>y(A,M)),filter:D})):v=[{key:"docs",commands:(i.files||[]).flatMap(M=>y(M)),filter:D}]),[((w=i.links)==null?void 0:w.length)&&{key:"links",label:"Links",commands:i.links.flatMap(M=>[M.to&&{id:a.resolve(M.to).fullPath,...M,icon:M.icon||b.value.fileIcon.name},...(M.children||[]).map(A=>({id:a.resolve(A.to).fullPath,prefix:M.label,suffix:A.description,...A,icon:A.icon||M.icon||b.value.fileIcon.name}))]).filter(Boolean)},...v,...i.groups||[],!(h!=null&&h.forced)&&!i.hideColorMode&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:o.ui.icons.light,disabled:h.preference==="light",click:()=>{h.preference="light"}},{id:"theme-dark",label:"Dark",icon:o.ui.icons.dark,disabled:h.preference==="dark",click:()=>{h.preference="dark"}}]}].filter(Boolean)}),_=E(()=>I.value||!u.value);function y(v,m){var M,A,N,Z,ve;const w=(M=fn((m==null?void 0:m.children)||[],v))==null?void 0:M.map(({title:q})=>q).join(" > ");return[{id:v._id,label:((A=v.navigation)==null?void 0:A.title)||v.title,title:((N=v.navigation)==null?void 0:N.title)||v.title,prefix:w,to:v._path,suffix:v.description,children:C(p(((Z=v==null?void 0:v.body)==null?void 0:Z.children)||[])),icon:$(v)},...Object.entries(g(((ve=v==null?void 0:v.body)==null?void 0:ve.children)||[])).map(([q,{title:re,children:we}])=>{var me;if(re)return{id:`${v._path}${q}`,label:re,prefix:(w?`${w} > `:"")+`${((me=v.navigation)==null?void 0:me.title)||v.title}`,to:`${v._path}${q}`,children:C(we),icon:$(v),child:!0}})].filter(Boolean)}function f(v){return(v==null?void 0:v.map(m=>{var w,M;if(["code","code-inline","em","a","strong"].includes(m.tag))return{type:"text",value:((M=(w=m.children)==null?void 0:w.find(A=>A.type==="text"))==null?void 0:M.value)||""};if(m.type==="text")return m}).filter(Boolean))||[]}function C(v){return v.map(m=>{if(["pre","style","video"].includes(m.tag))return;let w=[...m.children||[]];return["p","h1","h2","h3","h4","h5","h6","li","td","th"].includes(m.tag)&&w.length?(w=f(w).reduce((M,A)=>(M.length&&M[M.length-1].type==="text"?M[M.length-1].value+=A.value||"":M.push({...A}),M),[]),{...m,children:w}):{...m,children:C(w)}}).filter(Boolean)}function p(v){const m=[];for(const w of v){if(["h1","h2","h3"].includes(w.tag))break;m.push(w)}return m}function g(v){var A,N,Z,ve;const m={};let w="",M="";for(const q of v)["h1","h2","h3"].includes(q.tag)&&(M=((Z=(N=(A=q.children)==null?void 0:A.map(re=>{var we,me;if(re.type==="text")return re.value;if(["code","code-inline","em","a","strong"].includes(re.tag))return(me=(we=re.children)==null?void 0:we.find(zt=>zt.type==="text"))==null?void 0:me.value}))==null?void 0:N.filter(Boolean))==null?void 0:Z.join(" "))||"",M&&((ve=q.props)!=null&&ve.id)&&(w=`#${encodeURIComponent(q.props.id)}`)),m[w]?m[w].children.push(q):m[w]={children:[q],title:M};return m}function O(v){I.value=!1;const m=v[0];m&&(m.click?m.click():m.to?m.target==="_blank"||m.to.startsWith("http")?window.open(m.to,m.target||"_blank"):a.push(m.to):m.href&&window.open(m.href,"_blank"))}return Js({meta_k:{usingInput:!0,whenever:[_],handler:()=>{I.value=!I.value}},escape:{usingInput:!0,whenever:[I],handler:()=>{I.value=!1}}}),n({commandPaletteRef:P}),(v,m)=>{const w=Ds,M=Ks;return L(),j(M,{modelValue:K(I),"onUpdate:modelValue":m[1]||(m[1]=A=>pn(I)?I.value=A:null),overlay:!K(R),transition:!K(R),ui:K(b)},{default:W(()=>[ge(w,ce({ref_key:"commandPaletteRef",ref:P,"model-value":[],groups:K(x),ui:K(b).commandPalette,"close-button":K(b).default.closeButton,fuse:K(T),multiple:""},K(S),{"onUpdate:modelValue":O,onClose:m[0]||(m[0]=A=>I.value=!1)}),vt({_:2},[Se(v.$slots,(A,N)=>({name:N,fn:W(Z=>[ae(v.$slots,N,mt(gt(Z)))])}))]),1040,["groups","ui","close-button","fuse"])]),_:3},8,["modelValue","overlay","transition","ui"])}}}),Zs=(e,n)=>(console.warn("[@nuxt/ui-pro] `DocsSearch` is deprecated, use `ContentSearch` instead."),xe(Qs,n.attrs,n.slots));export{Zs as default};
